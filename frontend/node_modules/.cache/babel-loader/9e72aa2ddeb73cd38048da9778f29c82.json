{"ast":null,"code":"var _jsxFileName = \"/home/dilip/Desktop/MERN/himalayafinal/src/components/home2.component.js\";\nimport React, { Component } from 'react';\nimport { Link, NavLink, withRouter, Router } from 'react-router-dom';\nimport '../css/home.css';\nimport Menu from './menu.component';\nimport { Page, Text, View, Document, StyleSheet, PDFViewer } from '@react-pdf/renderer';\nimport ReactPDF from '@react-pdf/renderer';\nimport MyDocument from './pdf.component';\nimport ReactDOM from 'react-dom';\nimport Pdf from \"react-to-pdf\";\nimport axios from 'axios';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.get_pdf = e => {\n      e.preventDefault();\n      this.state.items.forEach(item => {\n        let item_in = this.state.categories.filter(category => {\n          if (item.item == category.name) {\n            return category.id;\n          }\n        });\n        item.item = item_in[0].id;\n      });\n      this.state.items.forEach(item => {\n        let items = item.brands.filter(brand => {\n          if (brand.name == item.brand) {\n            return brand.id;\n          }\n        });\n        item.brand = items[0].id;\n      });\n      const selectedIndex = document.getElementById('payment').options.selectedIndex;\n      let id = document.getElementById('payment').options[selectedIndex].getAttribute('id');\n      var data = this.state;\n      data.payment_method = id;\n      data.amount_payable = parseFloat(document.getElementById('amount').value);\n      data.total_discount = data.total_amount - data.amount_payable;\n      const headers = {\n        'Authorization': 'Token ' + sessionStorage.getItem('token')\n      };\n      axios.post('http://127.0.0.1:8000/receipts/', data, {\n        headers: headers\n      }).then(response => {\n        //   console.log(response)\n        // window.location.href(response.data.Data.receipt_link)\n        // const file = new Blob(\n        // [response.data], \n        // {type: 'application/pdf'});\n        // const fileURL = URL.createObjectURL(file);\n        // console.log(fileURL)\n        window.open(\"http://127.0.0.1:8000\" + response.data.Data.receipt_link);\n      }).catch(error => {});\n    };\n\n    this.handleChange = e => {\n      var data = e.target.value;\n      console.log(data);\n      this.setState({\n        [e.target.name]: data\n      });\n      console.log(this.state);\n    };\n\n    this.add_item = () => {\n      let item = {\n        \"id\": this.state.items.length + 1,\n        \"item\": \"\",\n        \"size\": \"\",\n        \"quantity\": \"\",\n        \"selling_price\": 0,\n        \"deleteable\": true\n      };\n      let items = [...this.state.items, item];\n      this.setState({\n        items: items\n      });\n    };\n\n    this.delete_item = e => {\n      let key = e.currentTarget.parentNode.parentNode.getAttribute(\"data-key\");\n      console.log(key);\n      let items = this.state.items.filter(item => {\n        return parseInt(item.id) !== parseInt(key);\n      });\n      this.setState({\n        items: items\n      });\n    };\n\n    this.update_item = e => {\n      let key = e.currentTarget.parentNode.getAttribute(\"data-key\");\n      console.log(key);\n    };\n\n    this.getBrands = id => {\n      const brands = this.state.categories.filter(category => {\n        return parseInt(category.id) == parseInt(id);\n      });\n      return brands[0].brands;\n    };\n\n    this.find_amount = () => {\n      var amount = 0;\n      this.state.items.forEach(item => {\n        let price = item.selling_price;\n        let quantity = item.quantity;\n\n        if (price == '') {\n          price = 0;\n        }\n\n        if (quantity == '') {\n          quantity = 1;\n        }\n\n        amount = parseInt(amount) + parseInt(price) * parseInt(quantity);\n      });\n      this.calculate(amount);\n      return amount;\n    };\n\n    this.calculate = amount => {\n      let discount = this.state.discount_given;\n\n      if (discount == '') {\n        discount = 0;\n      }\n\n      let reduced = discount * amount / 100;\n      let payable = amount - reduced;\n      document.getElementById('amount').value = payable;\n    };\n\n    this.componentDidUpdate = () => {\n      this.find_amount();\n    };\n\n    this.componentDidMount = () => {\n      const headers = {\n        'Authorization': 'Token ' + sessionStorage.getItem('token')\n      };\n      axios.get('http://127.0.0.1:8000/payments/', {\n        headers: headers\n      }).then(response => {\n        console.log(response.data.Data);\n        this.setState({\n          payment_options: response.data.Data\n        });\n      });\n      axios.get('http://127.0.0.1:8000/items/', {\n        headers: headers\n      }).then(response => {\n        this.setState({\n          categories: response.data.Data\n        });\n      });\n      axios.get('http://127.0.0.1:8000/sizes/', {\n        headers: headers\n      }).then(response => {\n        this.setState({\n          sizes: response.data.Data\n        });\n      });\n      console.log(this.state);\n    };\n\n    if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n      this.props.history.push('/');\n    }\n\n    this.state = {\n      fname: \"\",\n      lname: \"\",\n      mobile: \"\",\n      payment_method: \"\",\n      items: [{\n        \"id\": 1,\n        \"item\": \"\",\n        \"size\": \"\",\n        \"quantity\": 0,\n        \"selling_price\": 0,\n        \"deleteable\": false\n      }],\n      discount_given: 0,\n      total_amount: 0,\n      total_discount: 0,\n      amount_payable: 0,\n      payment_options: [],\n      categories: [],\n      sizes: []\n    };\n  }\n\n  render() {\n    const payments = this.state.payment_options.length ? this.state.payment_options.map(option => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: option.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }\n      }, option.name);\n    }) : \"\";\n    const categories = this.state.categories.length ? this.state.categories.map(category => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: category.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 17\n        }\n      }, category.name);\n    }) : \"\";\n    const sizes = this.state.sizes.length ? this.state.sizes.map(size => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: size.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 17\n        }\n      }, size.name);\n    }) : \" \";\n    console.log(this.state);\n    const items = this.state.items.length ? this.state.items.map(item => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-key\": item.id,\n        className: \"input-group form-group items-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-shopping-cart\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 52\n        }\n      }))), /*#__PURE__*/React.createElement(\"select\", {\n        onChange: this.update_item,\n        type: \"text\",\n        value: item.item,\n        className: \"form-control item\",\n        name: \"item\",\n        placeholder: \"Item\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }\n      }, categories), /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.update_item,\n        type: \"text\",\n        value: item.size,\n        className: \"form-control item\",\n        name: \"size\",\n        placeholder: \"Size\",\n        list: \"sizes\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        autoComplete: \"off\",\n        onChange: this.update_item,\n        type: \"number\",\n        value: item.quantity,\n        className: \"form-control item\",\n        min: \"1\",\n        name: \"quantity\",\n        placeholder: \"Quantity/Pairs\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        autoComplete: \"off\",\n        onChange: this.update_item,\n        type: \"number\",\n        value: item.selling_price,\n        className: \"form-control item\",\n        min: \"0\",\n        name: \"selling_price\",\n        placeholder: \"Price\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-postpend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }\n      }, item.deleteable ? /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        onClick: this.delete_item,\n        className: \"fa fa-times-circle add-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 43\n        }\n      })) : /*#__PURE__*/React.createElement(\"span\", {\n        onClick: this.add_item,\n        id: \"add-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 128\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-plus-circle add-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 173\n        }\n      }))));\n    }) : \"\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 25\n      }\n    }, \"Generate Reciept\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.get_pdf,\n      id: \"login_form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 72\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      type: \"text\",\n      value: this.state.fname,\n      className: \"form-control\",\n      id: \"fname\",\n      name: \"fname\",\n      placeholder: \"First Name\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 72\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.lname,\n      id: \"lname\",\n      name: \"lname\",\n      placeholder: \"Last Name\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-mobile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 72\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      type: \"tel\",\n      value: this.state.mobile,\n      className: \"form-control\",\n      id: \"mobile\",\n      placeholder: \"Mobile Number\",\n      name: \"mobile\",\n      pattern: \"[0-9]{10}\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-credit-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 72\n      }\n    }))), /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.handleChange,\n      value: this.state.payment_method,\n      id: \"payment\",\n      name: \"payment_method\",\n      className: \"form-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 33\n      }\n    }, payments)), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"items-cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 29\n      }\n    }, items, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group float-right price-tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-rupee\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 72\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      readOnly: true,\n      id: \"amount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group float-right price-tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-percent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 72\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      onChange: this.handleChange,\n      name: \"discount_given\",\n      className: \"form-control\",\n      min: \"0\",\n      max: \"100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      className: \"btn-lg login_btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"datalist\", {\n      id: \"sizes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 25\n      }\n    }, sizes)))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/dilip/Desktop/MERN/himalayafinal/src/components/home2.component.js"],"names":["React","Component","Link","NavLink","withRouter","Router","Menu","Page","Text","View","Document","StyleSheet","PDFViewer","ReactPDF","MyDocument","ReactDOM","Pdf","axios","Home","constructor","props","get_pdf","e","preventDefault","state","items","forEach","item","item_in","categories","filter","category","name","id","brands","brand","selectedIndex","document","getElementById","options","getAttribute","data","payment_method","amount_payable","parseFloat","value","total_discount","total_amount","headers","sessionStorage","getItem","post","then","response","window","open","Data","receipt_link","catch","error","handleChange","target","console","log","setState","add_item","length","delete_item","key","currentTarget","parentNode","parseInt","update_item","getBrands","find_amount","amount","price","selling_price","quantity","calculate","discount","discount_given","reduced","payable","componentDidUpdate","componentDidMount","get","payment_options","sizes","history","push","fname","lname","mobile","render","payments","map","option","size","deleteable"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, NavLink, withRouter, Router } from 'react-router-dom';\nimport '../css/home.css';\nimport Menu from './menu.component'\nimport { Page, Text, View, Document, StyleSheet, PDFViewer } from '@react-pdf/renderer';\nimport ReactPDF from '@react-pdf/renderer';\nimport MyDocument from './pdf.component';\nimport ReactDOM from 'react-dom';\nimport Pdf from \"react-to-pdf\";\nimport axios from 'axios';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props)\n        if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n            this.props.history.push('/')\n        }\n        this.state = {\n            fname: \"\",\n            lname: \"\",\n            mobile: \"\",\n            payment_method: \"\",\n            items: [\n                {\n                    \"id\": 1,\n                    \"item\": \"\",\n                    \"size\":\"\",\n                    \"quantity\": 0,\n                    \"selling_price\": 0,\n                    \"deleteable\": false\n                }\n            ],\n            discount_given: 0,\n            total_amount: 0,\n            total_discount: 0,\n            amount_payable: 0,\n            payment_options: [],\n            categories: [],\n            sizes: []\n        }\n    }\n\n    get_pdf = (e) => {\n        e.preventDefault();\n        this.state.items.forEach(item => {\n            let item_in = this.state.categories.filter(category => {\n                if (item.item == category.name) {\n                    return category.id\n                }\n            })\n            item.item = item_in[0].id\n\n        })\n\n        this.state.items.forEach(item => {\n            let items = item.brands.filter(brand => {\n                if (brand.name == item.brand) {\n                    return brand.id\n                }\n            })\n            item.brand = items[0].id\n        })\n        const selectedIndex = document.getElementById('payment').options.selectedIndex;\n        let id = (document.getElementById('payment').options[selectedIndex].getAttribute('id'));\n        var data = this.state\n        data.payment_method = id\n        data.amount_payable = parseFloat(document.getElementById('amount').value)\n        data.total_discount = data.total_amount - data.amount_payable\n\n\n\n        const headers = {\n            'Authorization': 'Token ' + sessionStorage.getItem('token')\n        }\n        axios.post('http://127.0.0.1:8000/receipts/', data, {\n            headers: headers,\n        })\n            .then(response => {\n                //   console.log(response)\n                // window.location.href(response.data.Data.receipt_link)\n                // const file = new Blob(\n                // [response.data], \n                // {type: 'application/pdf'});\n                // const fileURL = URL.createObjectURL(file);\n                // console.log(fileURL)\n                window.open(\"http://127.0.0.1:8000\" + response.data.Data.receipt_link);\n            })\n            .catch(error => {\n            });\n    }\n\n\n\n\n    handleChange = (e) => {\n        var data = e.target.value;\n        console.log(data)\n        this.setState({\n            [e.target.name]: data\n        })\n        console.log(this.state)\n    }\n\n\n    add_item = () => {\n        let item = {\n            \"id\": this.state.items.length + 1,\n            \"item\": \"\",\n            \"size\":\"\",\n            \"quantity\":\"\",\n            \"selling_price\": 0,\n            \"deleteable\": true,\n        }\n        let items = [...this.state.items, item];\n        this.setState({\n            items: items\n        });\n    };\n\n\n    delete_item = (e) => {\n        let key= e.currentTarget.parentNode.parentNode.getAttribute(\"data-key\");\n        console.log(key)\n        let items = this.state.items.filter(item => {\n            return parseInt(item.id) !== parseInt(key);\n        })\n        this.setState({\n            items: items\n        })\n    }\n\n\n    update_item =   (e) =>  {\n       let key= e.currentTarget.parentNode.getAttribute(\"data-key\");  \n        console.log(key)\n    }\n\n\n\n    getBrands = (id) => {\n        const brands = this.state.categories.filter(category => {\n            return parseInt(category.id) == parseInt(id)\n        })\n        return (brands[0].brands)\n    }\n\n\n\n\n    // update_item = (e) => {\n    //     let name = e.target.name\n    //     let id = e.target.getAttribute('id');\n    //     if (name === 'item') {\n    //         const selectedIndex = e.target.options.selectedIndex;\n    //         id = (e.target.options[selectedIndex].getAttribute('id'));\n    //         var brands = this.getBrands(id);\n    //     }\n    //     id = e.target.getAttribute('id');\n\n    //     const items = this.state.items.length ? (this.state.items.map(item => {\n    //         if (item.id == id) {\n    //             if (name === 'item') {\n    //                 let arr = []\n    //                 arr.push({ \"id\": 0, \"name\": \"None\" })\n    //                 brands.forEach(element => {\n    //                     arr.push(element)\n    //                 })\n    //                 item['brands'] = arr\n    //             }\n    //             item[name] = e.target.value;\n    //             return (item);\n    //         }\n    //         else {\n    //             return (item);\n    //         }\n    //     })) : ([])\n    //     this.setState({\n    //         items: items\n    //     })\n\n\n    //     this.setState({\n    //         total_amount: this.find_amount()\n    //     })\n    // }\n\n    find_amount = () => {\n        var amount = 0;\n        this.state.items.forEach((item) => {\n            let price = item.selling_price\n            let quantity = item.quantity\n            if (price == '') {\n                price = 0;\n            }\n            if (quantity == '') {\n                quantity = 1;\n            }\n            amount = parseInt(amount) + parseInt(price) * parseInt(quantity)\n        });\n        this.calculate(amount);\n        return amount;\n    }\n\n    calculate = (amount) => {\n        let discount = this.state.discount_given;\n        if (discount == '') {\n            discount = 0;\n        }\n        let reduced = (discount * amount / 100)\n        let payable = amount - reduced;\n        document.getElementById('amount').value = payable;\n    }\n    componentDidUpdate = () => {\n        this.find_amount();\n    }\n\n\n\n    componentDidMount = () => {\n        const headers = { 'Authorization': 'Token ' + sessionStorage.getItem('token') }\n\n        axios.get('http://127.0.0.1:8000/payments/', { headers: headers })\n            .then(response => {\n                console.log(response.data.Data)\n                this.setState({ payment_options: response.data.Data })\n            })\n\n        axios.get('http://127.0.0.1:8000/items/', { headers: headers })\n            .then(response => {\n                this.setState({ categories: response.data.Data })\n            })\n\n        axios.get('http://127.0.0.1:8000/sizes/', { headers: headers })\n            .then(response => {\n                this.setState({ sizes: response.data.Data })\n            })\n        console.log(this.state)\n    }\n\n\n\nrender()\n{\n    const payments = this.state.payment_options.length ? (this.state.payment_options.map(option => {\n        return (<option key={option.id}>{option.name}</option>)\n    })) : (\"\");\n\n    const categories = this.state.categories.length ? (this.state.categories.map(category => {\n        return (<option key={category.id}>{category.name}</option>)\n    })) : (\"\");\n\n    const sizes = this.state.sizes.length ? (this.state.sizes.map(size => {\n        return (<option key={size.id}>{size.name}</option>)\n    })) : (\" \")\n\nconsole.log(this.state);\n    const items = this.state.items.length ? (this.state.items.map(item => {\n        return (<div data-key={item.id} className=\"input-group form-group items-list\">\n            <div className=\"input-group-prepend\">\n                <span className=\"input-group-text\"><i className=\"fa fa-shopping-cart\"></i></span>\n            </div>\n            <select onChange={this.update_item} type=\"text\" value={item.item} className=\"form-control item\" name=\"item\" placeholder=\"Item\" required>{categories}</select>\n            <input onChange={this.update_item}  type=\"text\" value={item.size} className=\"form-control item\" name=\"size\" placeholder=\"Size\" list=\"sizes\"></input>\n            <input autoComplete=\"off\" onChange={this.update_item} type=\"number\" value={item.quantity} className=\"form-control item\" min=\"1\" name=\"quantity\" placeholder=\"Quantity/Pairs\" required />\n            <input autoComplete=\"off\" onChange={this.update_item} type=\"number\" value={item.selling_price} className=\"form-control item\" min=\"0\" name=\"selling_price\" placeholder=\"Price\" required />\n            <div className=\"input-group-postpend\">\n                {item.deleteable ? (<span><i onClick={this.delete_item} className=\"fa fa-times-circle add-btn\"></i></span>) : (<span onClick={this.add_item} id=\"add-item\" ><i className=\"fa fa-plus-circle add-btn\"></i></span>)}\n            </div>\n        </div>)\n    })) : (\"\");\n\n    return (\n        <div className=\"container\">\n            <Menu></Menu>\n            <div className=\"d-flex justify-content-center h-100\">\n                <div className=\"card float-left\">\n                    <div className=\"card-header\">\n                        <h3>Generate Reciept</h3>\n                    </div>\n                    <div className=\"card-body\">\n                        <form onSubmit={this.get_pdf} id=\"login_form\">\n                            <div className=\"input-group form-group\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\"><i className=\"fas fa-user\"></i></span>\n                                </div>\n                                <input onChange={this.handleChange} type=\"text\" value={this.state.fname} className=\"form-control\" id=\"fname\" name=\"fname\" placeholder=\"First Name\" required />\n                            </div>\n                            <div className=\"input-group form-group\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\"><i className=\"fas fa-user\"></i></span>\n                                </div>\n                                <input onChange={this.handleChange} type=\"text\" className=\"form-control\" value={this.state.lname} id=\"lname\" name=\"lname\" placeholder=\"Last Name\" required />\n                            </div>\n                            <div className=\"input-group form-group\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\"><i className=\"fa fa-mobile\"></i></span>\n                                </div>\n                                <input onChange={this.handleChange} type=\"tel\" value={this.state.mobile} className=\"form-control\" id=\"mobile\" placeholder=\"Mobile Number\" name=\"mobile\" pattern=\"[0-9]{10}\" required />\n                            </div>\n                            <div className=\"input-group form-group\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\"><i className=\"fa fa-credit-card\"></i></span>\n                                </div>\n                                <select onChange={this.handleChange} value={this.state.payment_method} id=\"payment\" name=\"payment_method\" className=\"form-control\">\n                                    {payments}\n                                </select>\n                            </div>\n                            <div id=\"items-cart\">\n                                {items}\n                                <div>\n                                </div>\n                            </div>\n\n                            <div className=\"input-group form-group float-right price-tag\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\"><i className=\"fa fa-rupee\"></i></span>\n                                </div>\n                                <input type=\"text\" className=\"form-control\" readOnly id=\"amount\" />\n                            </div>\n\n                            <div className=\"input-group form-group float-right price-tag\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\"><i className=\"fa fa-percent\"></i></span>\n                                </div>\n                                <input type=\"number\" onChange={this.handleChange} name=\"discount_given\" className=\"form-control\" min=\"0\" max=\"100\" />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <input type=\"submit\" value=\"Submit\" className=\"btn-lg login_btn\" />\n                            </div>\n\n                        </form>\n                        <datalist id=\"sizes\">\n                            {sizes}\n                        </datalist>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n}\nexport default Home;"]},"metadata":{},"sourceType":"module"}