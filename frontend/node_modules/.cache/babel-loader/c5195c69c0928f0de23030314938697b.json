{"ast":null,"code":"import _classCallCheck from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{MDBDataTableV5}from'mdbreact';import Menu from'./menu.component';import axios from'axios';var Customer=/*#__PURE__*/function(_Component){_inherits(Customer,_Component);var _super=_createSuper(Customer);function Customer(props){var _this;_classCallCheck(this,Customer);_this=_super.call(this,props);_this.errorOccured=function(status,err,message){var error={\"id\":_this.state.errors.length+1,\"status\":status,\"error\":err,\"message\":message};var errors=_this.state.errors;errors.push(error);_this.setState(errors);};_this.deleteError=function(e){var key=e.currentTarget.parentNode.getAttribute(\"data-key\");var errors=_this.state.errors.filter(function(error){return parseInt(error.id)!==parseInt(key);});_this.setState({errors:errors});};_this.update_rows=function(response){try{var columns=_this.state.datatable.columns;var rows=_this.state.datatable.rows;response.Data.results.forEach(function(element){rows.push(element);});var datatable={columns:columns,rows:rows};_this.setState({datatable:datatable});}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};_this.get_next=function(response){var headers={'Authorization':'Token '+sessionStorage.getItem('token')};axios.get(response,{headers:headers}).then(function(result){if(result.status==200){if(result.data.status==404){_this.errorOccured(404,result.data.error.error,\"Error\");}else if(result.data.status==200){_this.update_rows(result.data);if(result.data.Data.links.next!=null){_this.get_next(result.data.Data.links.next);}}else{_this.errorOccured(result.data.status,result.error.error,\"Unknown Error Occurred\");}}else{_this.errorOccured(500,\"erro occurred\",\"Unknown error occurred\");}}).catch(function(error){});};_this.componentDidMount=function(){var headers={'Authorization':'Token '+sessionStorage.getItem('token')};axios.get(window.API_URL+'/customers/',{headers:headers}).then(function(response){if(response.status==200){if(response.data.status==404){_this.errorOccured(404,response.data.error.error,\"Error\");}else if(response.data.status==200){_this.update_rows(response.data);_this.get_next(response.data.Data.links.next);}else{_this.errorOccured(response.data.status,response.error.error,\"Unknown Error Occurred\");}}else{_this.errorOccured(500,\"erro occurred\",\"Unknown error occurred\");}}).catch(function(error){// this.errorOccured(500, \"error occurred\", error.toString())\n});};if(sessionStorage.getItem('token')==='undefined'||sessionStorage.getItem('username')==='undefined'){_this.props.history.push('/');}_this.state={datatable:{columns:[{label:'FirstName',field:'fname',width:150},{label:'LastName',field:'lname',width:270},{label:'Mobile',field:'mobile',width:200},{label:'Date',field:'date',width:150},{label:'DOB',field:'birth_day',width:150}],rows:[]},errors:[]};return _this;}_createClass(Customer,[{key:\"render\",value:function render(){var _this2=this;var Error=this.state.errors.length?this.state.errors.map(function(error){return/*#__PURE__*/React.createElement(\"div\",{\"data-key\":error.id,className:\"alert alert-danger alert-dismissible override\"},/*#__PURE__*/React.createElement(\"a\",{href:\"#\",onClick:_this2.deleteError,class:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"close\"},\"\\xD7\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"error!\"),\" \",error.error),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"message\"),\" \",error.message),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"status\"),\" \",error.status));}):\"\";return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Menu,null),Error,/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:\"black\",fontSize:\"15px\",color:\"green\"}},/*#__PURE__*/React.createElement(MDBDataTableV5,{className:\"table-responsive\",style:{textAlign:\"left\",backgroundColor:\"black\",fontSize:\"20px\",color:\"white\"},hover:true,entriesOptions:[10,20,25],entries:10,pagesAmount:4,data:this.state.datatable,searchTop:true,searchBottom:false})));}}]);return Customer;}(Component);export default Customer;","map":{"version":3,"sources":["/home/dilip/Desktop/MERN/himalayadonelocal2/src/components/customer.component.js"],"names":["React","Component","MDBDataTableV5","Menu","axios","Customer","props","errorOccured","status","err","message","error","state","errors","length","push","setState","deleteError","e","key","currentTarget","parentNode","getAttribute","filter","parseInt","id","update_rows","response","columns","datatable","rows","Data","results","forEach","element","toString","get_next","headers","sessionStorage","getItem","get","then","result","data","links","next","catch","componentDidMount","window","API_URL","history","label","field","width","Error","map","backgroundColor","fontSize","color","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { MDBDataTableV5 } from 'mdbreact';\nimport Menu from './menu.component'\nimport axios from 'axios';\n\nclass Customer extends Component {\n  constructor(props) {\n    super(props);\n    if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n      this.props.history.push('/')\n    }\n    this.state = {\n      datatable: {\n        columns: [\n          {\n            label: 'FirstName',\n            field: 'fname',\n            width: 150,\n          },\n          {\n            label: 'LastName',\n            field: 'lname',\n            width: 270,\n          },\n          {\n            label: 'Mobile',\n            field: 'mobile',\n            width: 200,\n          },\n          {\n            label: 'Date',\n            field: 'date',\n            width: 150,\n          },\n          {\n            label: 'DOB',\n            field: 'birth_day',\n            width: 150,\n          }\n        ],\n        rows: [],\n      },\n      errors: []\n    }\n\n  }\n\n  errorOccured = (status, err, message) => {\n    let error = { \"id\": this.state.errors.length + 1, \"status\": status, \"error\": err, \"message\": message }\n    let errors = this.state.errors\n    errors.push(error)\n    this.setState(errors)\n  }\n\n  deleteError = (e) => {\n    let key = e.currentTarget.parentNode.getAttribute(\"data-key\");\n    let errors = this.state.errors.filter(error => {\n      return parseInt(error.id) !== parseInt(key);\n    })\n    this.setState({ errors: errors })\n  }\n\n  update_rows = (response) => {\n    try {\n      let columns = this.state.datatable.columns\n      let rows = this.state.datatable.rows\n      response.Data.results.forEach(element => { rows.push(element) })\n      let datatable = { columns: columns, rows: rows }\n      this.setState({ datatable: datatable })\n    }\n    catch (error) {\n      this.errorOccured(400, \"error occurred\", error.toString())\n\n    }\n  }\n  get_next = (response) => {\n\n\n    const headers = {\n      'Authorization': 'Token ' + sessionStorage.getItem('token')\n    }\n\n    axios.get(response, { headers: headers })\n      .then(result => {\n        if (result.status == 200) {\n\n          if (result.data.status == 404) {\n            this.errorOccured(404, result.data.error.error, \"Error\")\n          }\n\n          else if (result.data.status == 200) {\n            this.update_rows(result.data);\n            if (result.data.Data.links.next != null) {\n              this.get_next(result.data.Data.links.next)\n            }\n\n          }\n          else {\n            this.errorOccured(result.data.status, result.error.error, \"Unknown Error Occurred\")\n          }\n        }\n        else {\n          this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\")\n\n        }\n      })\n      .catch(error => {\n      });\n\n\n  }\n\n  componentDidMount = () => {\n    const headers = {\n      'Authorization': 'Token ' + sessionStorage.getItem('token')\n    }\n    axios.get(window.API_URL+'/customers/', {\n      headers: headers\n    })\n      .then(response => {\n\n        if (response.status == 200) {\n\n          if (response.data.status == 404) {\n            this.errorOccured(404, response.data.error.error, \"Error\")\n          }\n\n          else if (response.data.status == 200) {\n            this.update_rows(response.data);\n            this.get_next(response.data.Data.links.next)\n\n          }\n          else {\n\n            this.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\")\n          }\n        }\n        else {\n\n          this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\")\n\n        }\n      })\n      .catch(error => {\n\n        // this.errorOccured(500, \"error occurred\", error.toString())\n      });\n\n\n  }\n\n\n  render() {\n\n    var Error = this.state.errors.length ? this.state.errors.map(error => {\n      return (<div data-key={error.id} className='alert alert-danger alert-dismissible override'>\n        <a href=\"#\" onClick={this.deleteError} class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>\n        <div><strong>error!</strong> {error.error}</div>\n        <div><strong>message</strong> {error.message}</div>\n        <div><strong>status</strong> {error.status}</div></div>)\n    }) : (\"\")\n\n    return (\n      <div>\n        <Menu />\n        {Error}\n        <div style={{ backgroundColor: \"black\", fontSize: \"15px\", color: \"green\" }}>\n          <MDBDataTableV5 className=\"table-responsive\" style={{ textAlign: \"left\", backgroundColor: \"black\", fontSize: \"20px\", color: \"white\" }} hover entriesOptions={[10, 20, 25]} entries={10} pagesAmount={4} data={this.state.datatable} searchTop searchBottom={false} />\n        </div>\n      </div>\n\n    )\n\n  }\n}\nexport default Customer;"]},"metadata":{},"sourceType":"module"}