{"ast":null,"code":"var _jsxFileName = \"/home/dilip/Desktop/MERN/himalayafinal/src/components/home.component.js\";\nimport React, { Component } from 'react';\nimport { Link, NavLink, withRouter, Router } from 'react-router-dom';\nimport '../css/home.css';\nimport Menu from './menu.component';\nimport { Page, Text, View, Document, StyleSheet, PDFViewer } from '@react-pdf/renderer';\nimport ReactPDF from '@react-pdf/renderer';\nimport MyDocument from './pdf.component';\nimport ReactDOM from 'react-dom';\nimport Pdf from \"react-to-pdf\";\nimport axios from 'axios';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.get_pdf = e => {\n      e.preventDefault(); // console.log(this.state);\n      //console.log(document.getElementById('amount').value)\n      //console.log(this.state.items);\n\n      this.state.items.forEach(item => {\n        let item_in = this.state.categories.filter(category => {\n          if (item.item == category.name) {\n            return category.id;\n          }\n        });\n        item.item = item_in[0].id;\n      });\n      this.state.items.forEach(item => {\n        let items = item.brands.filter(brand => {\n          //console.log(brand)\n          if (brand.name == item.brand) {\n            return brand.id;\n          }\n        });\n        item.brand = items[0].id;\n      });\n      const selectedIndex = document.getElementById('payment').options.selectedIndex;\n      let id = document.getElementById('payment').options[selectedIndex].getAttribute('id');\n      var data = this.state;\n      data.payment_method = id;\n      data.amount_payable = parseFloat(document.getElementById('amount').value);\n      data.total_discount = data.total_amount - data.amount_payable;\n      console.log(data); // this.setState({payment_method:id})\n      // console.log(this.state);\n      // const data={\"fname\":this.state.fname,\"lname\":this.state.lname,\"mobile\":this.state.mobile}\n\n      const headers = {\n        'Authorization': 'Token ' + sessionStorage.getItem('token')\n      };\n      axios.post('http://127.0.0.1:8000/receipts/', data, {\n        headers: headers,\n        responseType: 'blob'\n      }).then(response => {\n        console.log(response);\n        window.location.href(response.data.Data.receipt_link); // const file = new Blob(\n        // [response.data], \n        // {type: 'application/pdf'});\n        // const fileURL = URL.createObjectURL(file);\n\n        window.open(response.data.Data.receipt_link);\n      }).catch(error => {});\n    };\n\n    this.handleChange = e => {\n      var data = e.target.value;\n      this.setState({\n        [e.target.name]: data\n      });\n    };\n\n    this.add_item = () => {\n      let item = {\n        \"id\": this.state.items.length + 1,\n        \"item\": '',\n        \"brand\": '',\n        \"brands\": [],\n        \"quantity\": '',\n        \"selling_price\": 0,\n        \"deleteable\": true\n      };\n      let items = [...this.state.items, item];\n      this.setState({\n        items: items\n      });\n    };\n\n    this.delete_item = e => {\n      let id = e.target.getAttribute('value');\n      let items = this.state.items.filter(item => {\n        return parseInt(item.id) !== parseInt(id);\n      });\n      this.setState({\n        items: items\n      });\n    };\n\n    this.getBrands = id => {\n      const brands = this.state.categories.filter(category => {\n        return parseInt(category.id) == parseInt(id);\n      });\n      return brands[0].brands;\n    };\n\n    this.update_item = e => {\n      let name = e.target.name;\n      let id = e.target.getAttribute('id');\n\n      if (name === 'item') {\n        const selectedIndex = e.target.options.selectedIndex;\n        id = e.target.options[selectedIndex].getAttribute('id');\n        var brands = this.getBrands(id);\n      }\n\n      id = e.target.getAttribute('id');\n      const items = this.state.items.length ? this.state.items.map(item => {\n        if (item.id == id) {\n          if (name === 'item') {\n            let arr = [];\n            arr.push({\n              \"id\": 0,\n              \"name\": \"None\"\n            });\n            brands.forEach(element => {\n              arr.push(element);\n            });\n            item['brands'] = arr;\n          }\n\n          item[name] = e.target.value;\n          return item;\n        } else {\n          return item;\n        }\n      }) : []; //console.log(items)\n\n      this.setState({\n        items: items\n      });\n      this.setState({\n        total_amount: this.find_amount()\n      });\n    };\n\n    this.find_amount = () => {\n      var amount = 0;\n      this.state.items.forEach(item => {\n        let price = item.selling_price;\n        let quantity = item.quantity;\n\n        if (price == '') {\n          price = 0;\n        }\n\n        if (quantity == '') {\n          quantity = 1;\n        }\n\n        amount = parseInt(amount) + parseInt(price) * parseInt(quantity);\n      });\n      this.calculate(amount);\n      return amount;\n    };\n\n    this.calculate = amount => {\n      let discount = this.state.discount_given;\n\n      if (discount == '') {\n        discount = 0;\n      }\n\n      let reduced = discount * amount / 100;\n      let payable = amount - reduced;\n      document.getElementById('amount').value = payable;\n    };\n\n    this.componentDidUpdate = () => {\n      this.find_amount();\n    };\n\n    this.componentDidMount = () => {\n      const headers = {\n        'Authorization': 'Token ' + sessionStorage.getItem('token')\n      };\n      axios.get('http://127.0.0.1:8000/payments/', {\n        headers: headers\n      }).then(response => {\n        this.setState({\n          payment_options: response.data.Data\n        });\n      });\n      axios.get('http://127.0.0.1:8000/items/', {\n        headers: headers\n      }).then(response => {\n        response.data.Data.forEach(category => {\n          axios.get('http://127.0.0.1:8000/brands/get_brands/' + category.id + '/', {\n            headers: headers\n          }).then(response => {\n            category.brands = response.data.Data;\n          });\n        });\n        let arr = [];\n        arr.push({\n          \"id\": 0,\n          \"name\": \"None\",\n          \"brands\": []\n        });\n        response.data.Data.forEach(element => {\n          arr.push(element);\n        });\n        this.setState({\n          categories: arr\n        });\n      });\n    };\n\n    if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n      this.props.history.push('/');\n    }\n\n    this.state = {\n      fname: \"\",\n      lname: \"\",\n      mobile: \"\",\n      items: [{\n        \"id\": 1,\n        \"item\": \"\",\n        \"brand\": \"\",\n        \"brands\": [],\n        \"quantity\": \"\",\n        \"selling_price\": 0,\n        \"deleteable\": false\n      }],\n      discount_given: 0,\n      payment_method: '',\n      total_amount: 0,\n      total_discount: 0,\n      amount_payable: 0,\n      payment_options: [],\n      categories: [],\n      brands: []\n    };\n  }\n\n  render() {\n    const payments = this.state.payment_options.length ? this.state.payment_options.map(option => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        id: option.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 16\n        }\n      }, option.name);\n    }) : \"\";\n    const categories = this.state.categories.length ? this.state.categories.map(category => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        id: category.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 20\n        }\n      }, category.name);\n    }) : \"\"; //console.log(this.state.items.length)\n\n    const items = this.state.items.length ? this.state.items.map(item => {\n      //console.log(item)\n      const brands = item.brands.length ? item.brands.map(brand => {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          id: brand.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 16\n          }\n        }, brand.name);\n      }) : \"\";\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item.id,\n        className: \"input-group form-group items-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-shopping-cart\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 36\n        }\n      }))), /*#__PURE__*/React.createElement(\"select\", {\n        onChange: this.update_item,\n        id: item.id,\n        type: \"text\",\n        value: item.item,\n        className: \"form-control item\",\n        name: \"item\",\n        placeholder: \"Item\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 1\n        }\n      }, categories), /*#__PURE__*/React.createElement(\"select\", {\n        onChange: this.update_item,\n        id: item.id,\n        type: \"text\",\n        value: item.brand,\n        className: \"form-control item\",\n        name: \"brand\",\n        placeholder: \"Brand\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 1\n        }\n      }, brands), /*#__PURE__*/React.createElement(\"input\", {\n        autoComplete: \"off\",\n        onChange: this.update_item,\n        id: item.id,\n        type: \"number\",\n        value: item.quantity,\n        className: \"form-control item\",\n        min: \"1\",\n        name: \"quantity\",\n        placeholder: \"Quantity/Pairs\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 1\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        autoComplete: \"off\",\n        onChange: this.update_item,\n        id: item.id,\n        type: \"number\",\n        value: item.selling_price,\n        className: \"form-control item\",\n        min: \"0\",\n        name: \"selling_price\",\n        placeholder: \"Price\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 1\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-postpend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 1\n        }\n      }, item.deleteable ? /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        value: item.id,\n        onClick: this.delete_item,\n        className: \"fa fa-times-circle add-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 25\n        }\n      })) : /*#__PURE__*/React.createElement(\"span\", {\n        onClick: this.add_item,\n        id: \"add-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 124\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-plus-circle add-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 169\n        }\n      }))));\n    }) : \"\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 1\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 1\n      }\n    }, \"Generate Reciept\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.get_pdf,\n      id: \"login_form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 36\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      type: \"text\",\n      value: this.state.fname,\n      className: \"form-control\",\n      id: \"fname\",\n      name: \"fname\",\n      placeholder: \"First Name\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 1\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 36\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.lname,\n      id: \"lname\",\n      name: \"lname\",\n      placeholder: \"Last Name\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 1\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-mobile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 36\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      type: \"tel\",\n      value: this.state.mobile,\n      className: \"form-control\",\n      id: \"mobile\",\n      placeholder: \"Mobile Number\",\n      name: \"mobile\",\n      pattern: \"[0-9]{10}\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 1\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-credit-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 36\n      }\n    }))), /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.handleChange,\n      value: this.state.payment_method,\n      id: \"payment\",\n      name: \"payment_method\",\n      className: \"form-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 1\n      }\n    }, payments)), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"items-cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 1\n      }\n    }, items, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 1\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group float-right price-tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-rupee\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 36\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      readOnly: true,\n      id: \"amount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 1\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group form-group float-right price-tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-percent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 36\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      onChange: this.handleChange,\n      name: \"discount_given\",\n      className: \"form-control\",\n      min: \"0\",\n      max: \"100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 1\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      className: \"btn-lg login_btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 1\n      }\n    })))))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/dilip/Desktop/MERN/himalayafinal/src/components/home.component.js"],"names":["React","Component","Link","NavLink","withRouter","Router","Menu","Page","Text","View","Document","StyleSheet","PDFViewer","ReactPDF","MyDocument","ReactDOM","Pdf","axios","Home","constructor","props","get_pdf","e","preventDefault","state","items","forEach","item","item_in","categories","filter","category","name","id","brands","brand","selectedIndex","document","getElementById","options","getAttribute","data","payment_method","amount_payable","parseFloat","value","total_discount","total_amount","console","log","headers","sessionStorage","getItem","post","responseType","then","response","window","location","href","Data","receipt_link","open","catch","error","handleChange","target","setState","add_item","length","delete_item","parseInt","getBrands","update_item","map","arr","push","element","find_amount","amount","price","selling_price","quantity","calculate","discount","discount_given","reduced","payable","componentDidUpdate","componentDidMount","get","payment_options","history","fname","lname","mobile","render","payments","option","deleteable"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { Link, NavLink, withRouter, Router } from 'react-router-dom';\nimport '../css/home.css';\nimport Menu from './menu.component'\nimport { Page, Text, View, Document, StyleSheet, PDFViewer } from '@react-pdf/renderer';\nimport ReactPDF from '@react-pdf/renderer';\nimport MyDocument from './pdf.component';\nimport ReactDOM from 'react-dom';\nimport Pdf from \"react-to-pdf\";\nimport axios from 'axios';\n\nclass Home extends Component\n{\nconstructor(props)\n{\nsuper(props)\nif(sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined')\n{\nthis.props.history.push('/')\n}\nthis.state={\nfname:\"\",\nlname:\"\",\nmobile:\"\",\nitems:[\n{\n\"id\":1,\n\"item\":\"\",\n\"brand\":\"\",\n\"brands\":[],\n\"quantity\":\"\",\n\"selling_price\":0,\n\"deleteable\":false\n}\n],\ndiscount_given:0,\npayment_method:'',\ntotal_amount:0,\ntotal_discount:0,\namount_payable:0,\npayment_options:[],\ncategories:[],\nbrands:[]\n}\n}\n\nget_pdf=(e)=> {\ne.preventDefault();\n// console.log(this.state);\n//console.log(document.getElementById('amount').value)\n//console.log(this.state.items);\nthis.state.items.forEach(item=>{\n    let item_in=this.state.categories.filter(category=>{\n        if(item.item==category.name)\n        {\n            return category.id\n        }        })\n        item.item=item_in[0].id\n        \n})\n\nthis.state.items.forEach(item=>{\n    let items=item.brands.filter(brand=>{\n        //console.log(brand)\n        if(brand.name==item.brand)\n        {\n            return brand.id\n        }        })\n        item.brand=items[0].id\n})\nconst selectedIndex = document.getElementById('payment').options.selectedIndex;\nlet id=(document.getElementById('payment').options[selectedIndex].getAttribute('id'));\nvar data=this.state\ndata.payment_method=id\ndata.amount_payable=parseFloat(document.getElementById('amount').value)\ndata.total_discount=data.total_amount-data.amount_payable\nconsole.log(data);\n// this.setState({payment_method:id})\n// console.log(this.state);\n\n// const data={\"fname\":this.state.fname,\"lname\":this.state.lname,\"mobile\":this.state.mobile}\n\n\nconst headers = {\n    'Authorization': 'Token '+sessionStorage.getItem('token')\n  }\n  axios.post('http://127.0.0.1:8000/receipts/',data,{\n    headers: headers,\n    responseType: 'blob'\n  })\n  .then(response => {\n      console.log(response)\n    window.location.href(response.data.Data.receipt_link)\n    // const file = new Blob(\n    // [response.data], \n    // {type: 'application/pdf'});\n    // const fileURL = URL.createObjectURL(file);\n    window.open(response.data.Data.receipt_link);\n    })\n    .catch(error => {\n    });\n}\n\n\n\n\nhandleChange=(e)=>{\nvar data=e.target.value;\nthis.setState({\n[e.target.name]:data\n})\n}\n\n\nadd_item=()=>{\nlet item={\n\"id\":this.state.items.length+1,\n\"item\":'',\n\"brand\":'',\n\"brands\":[],\n\"quantity\":'',\n\"selling_price\":0,\n\"deleteable\":true,\n}\nlet items=[...this.state.items,item];\nthis.setState({\nitems: items\n});\n};\n\n\ndelete_item=(e)=>{\nlet id=e.target.getAttribute('value');\nlet items=this.state.items.filter(item=>{\nreturn parseInt(item.id)!==parseInt(id);\n})\nthis.setState({\nitems: items\n})\n}\n\n\ngetBrands=(id)=>{\n    const brands=this.state.categories.filter(category=>{ \n        return parseInt(category.id) == parseInt(id)\n    })\n    return(brands[0].brands)\n}\n\n\n\n\nupdate_item=(e)=>{\nlet name=e.target.name\nlet id=e.target.getAttribute('id');\nif(name === 'item')\n{\n    const selectedIndex = e.target.options.selectedIndex;\n    id=(e.target.options[selectedIndex].getAttribute('id'));\n    var brands=this.getBrands(id);\n}\nid=e.target.getAttribute('id');\n\nconst items=this.state.items.length?(this.state.items.map(item=>{ \nif(item.id == id)\n{\n    if(name === 'item')\n    {\n        let arr=[]\n        arr.push({\"id\":0,\"name\":\"None\"})\n        brands.forEach(element=>{\n            arr.push(element)\n        })\n        item['brands']=arr\n    }\nitem[name]=e.target.value;\nreturn(item);\n}\nelse\n{\nreturn(item);\n}\n})):([])\n//console.log(items)\nthis.setState({\nitems:items\n})\n\n\nthis.setState({\ntotal_amount:this.find_amount()\n})\n}\n\nfind_amount=()=>{\nvar amount=0;\nthis.state.items.forEach((item)=>{\n    let price=item.selling_price\n    let quantity=item.quantity\nif(price == '')\n{\n    price=0;\n}\nif(quantity == '')\n{\n    quantity=1;\n}\namount =parseInt(amount)+parseInt(price)*parseInt(quantity)\n});\nthis.calculate(amount);\nreturn amount;\n}\n\ncalculate=(amount)=>{\nlet discount=this.state.discount_given;\nif(discount == '')\n{\n    discount=0;\n}\nlet reduced=(discount*amount/100)\nlet payable=amount-reduced;\ndocument.getElementById('amount').value=payable;\n}\ncomponentDidUpdate=()=>{\n    this.find_amount();\n}\ncomponentDidMount=()=>{\n    const headers = {\n        'Authorization': 'Token '+sessionStorage.getItem('token')\n      }\n      axios.get('http://127.0.0.1:8000/payments/',{\n        headers: headers\n      })\n      .then(response =>{\n          this.setState({payment_options:response.data.Data})\n      })\n      \n      axios.get('http://127.0.0.1:8000/items/',{\n        headers: headers\n      })\n      .then(response =>{\n          response.data.Data.forEach(category=>{\n            axios.get('http://127.0.0.1:8000/brands/get_brands/'+category.id+'/',{\n                headers: headers\n              })\n              .then(response =>{\n                  category.brands=response.data.Data;\n              })  \n          })\n          let arr=[]\n          arr.push({\"id\":0,\"name\":\"None\",\"brands\":[]})\n          response.data.Data.forEach(element=>{\n              arr.push(element)\n          })\n\n          this.setState({categories:arr})\n\n      })\n\n\n      \n}\nrender()\n{\n    const payments=this.state.payment_options.length?(this.state.payment_options.map(option =>{\n        return(<option id={option.id}>{option.name}</option>)\n        })):(\"\");\n        \n    const categories=this.state.categories.length?(this.state.categories.map(category =>{\n            return(<option id={category.id}>{category.name}</option>)\n            })):(\"\");\n\n        \n\n//console.log(this.state.items.length)\n\n\nconst items=this.state.items.length?(this.state.items.map( item => { \n    //console.log(item)\n    const brands=item.brands.length?(item.brands.map(brand =>{\n        return(<option id={brand.id}>{brand.name}</option>)\n        })):(\"\");\n\nreturn (\n<div key={item.id} className=\"input-group form-group items-list\">\n<div className=\"input-group-prepend\">\n<span className=\"input-group-text\"><i className=\"fa fa-shopping-cart\"></i></span>\n</div>\n<select onChange={this.update_item} id={item.id} type=\"text\" value={item.item} className=\"form-control item\" name=\"item\" placeholder=\"Item\" required>{categories}</select>\n<select onChange={this.update_item} id={item.id} type=\"text\" value={item.brand} className=\"form-control item\" name=\"brand\" placeholder=\"Brand\" required>{brands}</select>\n<input autoComplete=\"off\" onChange={this.update_item} id={item.id} type=\"number\" value={item.quantity} className=\"form-control item\" min=\"1\" name=\"quantity\" placeholder=\"Quantity/Pairs\" required/>\n<input autoComplete=\"off\" onChange={this.update_item} id={item.id} type=\"number\" value={item.selling_price} className=\"form-control item\" min=\"0\" name=\"selling_price\" placeholder=\"Price\" required/>\n<div className=\"input-group-postpend\">\n{item.deleteable?(<span><i value={item.id} onClick={this.delete_item} className=\"fa fa-times-circle add-btn\"></i></span>):(<span onClick={this.add_item} id=\"add-item\" ><i className=\"fa fa-plus-circle add-btn\"></i></span>)}\n</div>\n</div>\n)})):(\"\");  \n\n\n\n\nreturn(\n\n<div className=\"container\">\n\n<Menu></Menu>\n\n<div className=\"d-flex justify-content-center h-100\">\n<div className=\"card float-left\">\n\n<div className=\"card-header\">\n<h3>Generate Reciept</h3>\n</div>\n\n<div className=\"card-body\">\n<form onSubmit={this.get_pdf} id=\"login_form\">\n\n<div className=\"input-group form-group\">\n<div className=\"input-group-prepend\">\n<span className=\"input-group-text\"><i className=\"fas fa-user\"></i></span>\n</div>\n<input onChange={this.handleChange} type=\"text\" value={this.state.fname} className=\"form-control\" id=\"fname\" name=\"fname\" placeholder=\"First Name\" required/>\t\n</div>\n\n<div className=\"input-group form-group\">\n<div className=\"input-group-prepend\">\n<span className=\"input-group-text\"><i className=\"fas fa-user\"></i></span>\n</div>\n<input onChange={this.handleChange} type=\"text\" className=\"form-control\" value={this.state.lname} id=\"lname\" name=\"lname\" placeholder=\"Last Name\" required/>\n</div>\n\n<div className=\"input-group form-group\">\n<div className=\"input-group-prepend\">\n<span className=\"input-group-text\"><i className=\"fa fa-mobile\"></i></span>\n</div>\n<input onChange={this.handleChange} type=\"tel\" value={this.state.mobile} className=\"form-control\" id=\"mobile\" placeholder=\"Mobile Number\" name=\"mobile\" pattern=\"[0-9]{10}\"required/>\n</div>\n\n<div className=\"input-group form-group\">\n<div className=\"input-group-prepend\">\n<span className=\"input-group-text\"><i className=\"fa fa-credit-card\"></i></span>\n</div>\n<select onChange={this.handleChange} value={this.state.payment_method} id=\"payment\" name=\"payment_method\" className=\"form-control\">\n{payments}\n</select>\n</div>\n\n<div id=\"items-cart\">\n{items}\n<div>\n\n</div>\n</div>\n\n<div className=\"input-group form-group float-right price-tag\">\n<div className=\"input-group-prepend\">\n<span className=\"input-group-text\"><i className=\"fa fa-rupee\"></i></span>\n</div>\n<input type=\"text\" className=\"form-control\" readOnly  id=\"amount\"/>\n</div>\n\n<div className=\"input-group form-group float-right price-tag\">\n<div className=\"input-group-prepend\">\n<span className=\"input-group-text\"><i className=\"fa fa-percent\"></i></span>\n</div>\n<input type=\"number\" onChange={this.handleChange} name=\"discount_given\" className=\"form-control\" min=\"0\" max=\"100\"/>\n</div>\n\n<div className=\"form-group\">\n<input type=\"submit\" value=\"Submit\" className=\"btn-lg login_btn\"/>\n</div>\n\n</form>\n{/* <datalist id=\"items\">\n{categories}\n</datalist> */}\n</div>\n</div>\n</div>\n</div>\n)\n}\n}\nexport default Home;"]},"metadata":{},"sourceType":"module"}