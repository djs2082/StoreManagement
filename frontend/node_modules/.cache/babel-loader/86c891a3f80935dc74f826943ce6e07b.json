{"ast":null,"code":"var _jsxFileName = \"/home/dilip/Desktop/MERN/himalayadonelocal2/src/components/sale.component.js\";\nimport React, { Component } from 'react';\nimport { MDBDataTableV5 } from 'mdbreact';\nimport Menu from './menu.component';\nimport '../css/sale.css';\nimport axios from 'axios';\n\nclass Customer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.errorOccured = (status, err, message) => {\n      let error = {\n        \"id\": this.state.errors.length + 1,\n        \"status\": status,\n        \"error\": err,\n        \"message\": message\n      };\n      let errors = this.state.errors;\n      errors.push(error);\n      console.log(errors);\n      this.setState(errors);\n    };\n\n    this.deleteError = e => {\n      let key = e.currentTarget.parentNode.getAttribute(\"data-key\");\n      console.log(key);\n      let errors = this.state.errors.filter(error => {\n        return parseInt(error.id) !== parseInt(key);\n      });\n      this.setState({\n        errors: errors\n      });\n    };\n\n    this.update_rows = response => {\n      try {\n        let columns = this.state.datatable.columns;\n        let rows = this.state.datatable.rows;\n\n        if (response.status === 200) {\n          response.Data.results.forEach(element => {\n            if (element.customer != null) {\n              var row = {\n                'fname': element.customer.fname || \"\",\n                'lname': element.customer.lname,\n                'mobile': element.customer.mobile,\n                'amount_payable': element.amount_payable,\n                'total_discount': element.total_discount,\n                'payment_method': element.payment_method.name,\n                'date': element.customer.date,\n                'receipt_pdf': element.receipt_pdf ? /*#__PURE__*/React.createElement(\"a\", {\n                  href: element.receipt_pdf,\n                  target: \"blank\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 306\n                  }\n                }, \"click\") : \"\"\n              };\n              rows.push(row);\n            }\n          });\n          let datatable = {\n            columns: columns,\n            rows: rows\n          };\n          this.setState({\n            datatable: datatable\n          });\n        }\n      } catch (error) {\n        this.errorOccured(500, \"erro occurred\", error.toString());\n      }\n    };\n\n    this.get_next = response => {\n      try {\n        const headers = {\n          'Authorization': 'Token ' + sessionStorage.getItem('token')\n        };\n        axios.get(response, {\n          headers: headers\n        }).then(result => {\n          this.update_rows(result.data);\n\n          if (result.data.Data.links.next != null) {\n            this.get_next(result.data.Data.links.next);\n          }\n        });\n      } catch (error) {\n        this.errorOccured(500, \"erro occurred\", error.toString());\n      }\n    };\n\n    this.componentDidMount = () => {\n      const headers = {\n        'Authorization': 'Token ' + sessionStorage.getItem('token')\n      };\n      axios.get('https://shield.pythonanywhere.com/receipts/', {\n        headers: headers\n      }).then(response => {\n        console.log(response);\n\n        if (response.status == 200) {\n          if (response.data.status == 404) {\n            this.errorOccured(404, response.data.error.error, \"Error\");\n          } else if (response.data.status == 200) {\n            this.update_rows(response.data);\n            this.get_next(response.data.Data.links.next);\n          } else {\n            console.log('occ');\n            this.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\");\n          }\n        } else {\n          console.log('occ');\n          this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\");\n        }\n      }).catch(error => {\n        console.log('occ');\n        this.errorOccured(500, \"error occurred\", error.message);\n      });\n    };\n\n    if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n      this.props.history.push('/');\n    }\n\n    this.state = {\n      datatable: {\n        columns: [{\n          label: 'FirstName',\n          field: 'fname',\n          width: 150\n        }, {\n          label: 'LastName',\n          field: 'lname',\n          width: 270\n        }, {\n          label: 'Mobile',\n          field: 'mobile',\n          width: 270\n        }, {\n          label: 'Amount Paid',\n          field: 'amount_payable',\n          width: 200\n        }, {\n          label: 'Discount Provided',\n          field: 'total_discount',\n          sort: 'disabled',\n          width: 150\n        }, {\n          label: 'Payment Type',\n          field: 'payment_method',\n          width: 270\n        }, {\n          label: 'Date',\n          field: 'date',\n          width: 270\n        }, {\n          label: 'Reciept',\n          field: 'receipt_pdf',\n          width: 270\n        }],\n        rows: []\n      },\n      errors: []\n    };\n    this.payments = \"\";\n    var _headers = {\n      'Authorization': 'Token ' + sessionStorage.getItem('token')\n    };\n    axios.get('https://shield.pythonanywhere.com/payments/payments_today/', {\n      headers: _headers\n    }).then(response => {\n      console.log(response);\n\n      if (response.status == 200) {\n        if (response.data.status == 404) {\n          this.errorOccured(404, response.data.error.error, \"Error\");\n        } else if (response.data.status == 200) {\n          var payments = response.data.Data.amount_wise_payment_list.map(payment => {\n            return /*#__PURE__*/React.createElement(\"tr\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 22\n              }\n            }, \" \", /*#__PURE__*/React.createElement(\"th\", {\n              style: {\n                color: \"green\"\n              },\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 27\n              }\n            }, payment.name), /*#__PURE__*/React.createElement(\"td\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 74\n              }\n            }, payment.amount));\n          });\n          var total_amount = response.data.Data.total_amount_paid_today;\n          this.setState({\n            payments: payments,\n            total_amount: total_amount\n          });\n        } else {\n          console.log('occ');\n          this.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\");\n        }\n      } else {\n        console.log('occ');\n        this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\");\n      }\n    }).catch(error => {\n      console.log('occ');\n      this.errorOccured(500, \"error occurred\", error.message);\n    });\n  }\n\n  render() {\n    var Error = this.state.errors.length ? this.state.errors.map(error => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-key\": error.id,\n        className: \"alert alert-danger alert-dismissible override\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 75\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.deleteError,\n        class: \"close\",\n        \"data-dismiss\": \"alert\",\n        \"aria-label\": \"close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 2\n        }\n      }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 2\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 7\n        }\n      }, \"error!\"), \" \", error.error), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 2\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 7\n        }\n      }, \"message\"), \" \", error.message), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 2\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 7\n        }\n      }, \"status\"), \" \", error.status));\n    }) : \"\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }\n    }), Error, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: \"black\",\n        fontSize: \"15px\",\n        color: \"green\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(MDBDataTableV5, {\n      className: \"table-responsive\",\n      style: {\n        backgroundColor: \"black\",\n        fontSize: \"20px\",\n        color: \"white\"\n      },\n      hover: true,\n      entriesOptions: [10, 20, 25],\n      entries: 10,\n      pagesAmount: 4,\n      data: this.state.datatable,\n      searchTop: true,\n      searchBottom: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        backgroundColor: \"black\",\n        fontSize: \"20px\",\n        color: \"white\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      style: {\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, \"Payment Type\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }\n    }, \"Amount Paid\")), console.log(this.payments), this.state.payments, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      style: {\n        color: \"blue\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 5\n      }\n    }, \"Total\"), /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        color: \"blue\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 5\n      }\n    }, this.state.total_amount)))));\n  }\n\n}\n\nexport default Customer;","map":{"version":3,"sources":["/home/dilip/Desktop/MERN/himalayadonelocal2/src/components/sale.component.js"],"names":["React","Component","MDBDataTableV5","Menu","axios","Customer","constructor","props","errorOccured","status","err","message","error","state","errors","length","push","console","log","setState","deleteError","e","key","currentTarget","parentNode","getAttribute","filter","parseInt","id","update_rows","response","columns","datatable","rows","Data","results","forEach","element","customer","row","fname","lname","mobile","amount_payable","total_discount","payment_method","name","date","receipt_pdf","toString","get_next","headers","sessionStorage","getItem","get","then","result","data","links","next","componentDidMount","catch","history","label","field","width","sort","payments","amount_wise_payment_list","map","payment","color","amount","total_amount","total_amount_paid_today","render","Error","backgroundColor","fontSize","textAlign"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\nimport { MDBDataTableV5 } from 'mdbreact';\nimport Menu from './menu.component'\nimport '../css/sale.css';\nimport axios from 'axios';\n\n\nclass Customer extends Component\n{\nconstructor(props)\n{\n    super(props);\n    if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n      this.props.history.push('/')\n  }\n    this.state={\n        datatable:{\n            columns:[\n                {\n                    label: 'FirstName',\n                    field: 'fname',\n                    width: 150,\n                  },\n                  {\n                    label: 'LastName',\n                    field: 'lname',\n                    width: 270,\n                  },\n                  {\n                    label: 'Mobile',\n                    field: 'mobile',\n                    width: 270,\n                  },\n                  {\n                    label: 'Amount Paid',\n                    field: 'amount_payable',\n                    width: 200,\n                  },\n                  {\n                    label: 'Discount Provided',\n                    field: 'total_discount',\n                    sort: 'disabled',\n                    width: 150,\n                  },\n                  {\n                    label: 'Payment Type',\n                    field: 'payment_method',\n                    width: 270,\n                  },\n                  {\n                    label: 'Date',\n                    field: 'date',\n                    width: 270,\n                  },\n                  {\n                    label: 'Reciept',\n                    field: 'receipt_pdf',\n                    width: 270,\n                  }\n            ],\n            rows: [\n            ],\n        },\n        errors:[]\n    }\n    this.payments=\"\";\n    var headers = {\n      'Authorization': 'Token '+sessionStorage.getItem('token')\n    }\n    axios.get('https://shield.pythonanywhere.com/payments/payments_today/',{\n      headers: headers\n    })\n    .then(response => {\n      console.log(response)\n      if(response.status == 200)\n      {\n\n          if(response.data.status == 404)\n          {\n              this.errorOccured(404,response.data.error.error,\"Error\")\n          }\n      \n          else if(response.data.status == 200)\n          {\n            var payments=response.data.Data.amount_wise_payment_list.map(payment=>{\n              return(<tr> <th style={{color:\"green\"}}>{payment.name}</th><td>{payment.amount}</td></tr>)\n            })\n            var total_amount=response.data.Data.total_amount_paid_today\n            this.setState({payments:payments,total_amount:total_amount})\n              \n          }\n          else\n          {\n              console.log('occ')\n              this.errorOccured(response.data.status,response.error.error,\"Unknown Error Occurred\")\n          }\n      }\n      else\n      {\n          console.log('occ')\n          this.errorOccured(500,\"erro occurred\",\"Unknown error occurred\")\n\n      }\n      })\n  .catch(error => {\n      console.log('occ')\n      this.errorOccured(500,\"error occurred\",error.message)\n  });\n    }\n\n    errorOccured=(status,err,message)=>{\n      let error={\"id\":this.state.errors.length+1,\"status\":status,\"error\":err,\"message\":message}\n      let errors=this.state.errors\n      errors.push(error)\n      console.log(errors)\n      this.setState(errors)\n  }\n  \n  deleteError=(e)=>{\n          let key= e.currentTarget.parentNode.getAttribute(\"data-key\");\n          console.log(key)\n          let errors = this.state.errors.filter(error => {\n              return parseInt(error.id) !== parseInt(key);\n          })\n          this.setState({errors: errors})\n  }\n\n\n\n    update_rows=(response)=>{\n\n      try\n      {\n      let columns=this.state.datatable.columns\n      let rows=this.state.datatable.rows\n      if(response.status === 200)\n      {\n\n      response.Data.results.forEach(element=>{\n\n        if(element.customer != null)\n        {\n        var row={'fname':element.customer.fname||\"\",'lname':element.customer.lname,'mobile':element.customer.mobile,'amount_payable':element.amount_payable,'total_discount':element.total_discount,'payment_method':element.payment_method.name,'date':element.customer.date,'receipt_pdf':element.receipt_pdf?(<a href={element.receipt_pdf} target=\"blank\">click</a>):(\"\")}\n\n        rows.push(row)\n        }\n      }\n        )\n\n      let datatable={columns:columns,rows:rows}\n      this.setState({datatable:datatable})\n    }\n  }\n  catch(error)\n  {\n    this.errorOccured(500,\"erro occurred\",error.toString())\n\n  }\n  } \n\n    get_next=(response)=>{\n      try\n      {\n      const headers = {\n        'Authorization': 'Token '+sessionStorage.getItem('token')\n      }\n\n        axios.get(response,{headers:headers})\n        .then(result=>{\n          this.update_rows(result.data);\n          if(result.data.Data.links.next != null)\n          {\n            this.get_next(result.data.Data.links.next)\n          }\n        })\n      }\n      catch(error)\n      {\n    this.errorOccured(500,\"erro occurred\",error.toString())\n\n      }\n      \n    }\n\n    componentDidMount=()=>{\n      const headers = {\n        'Authorization': 'Token '+sessionStorage.getItem('token')\n      }\n      axios.get('https://shield.pythonanywhere.com/receipts/',{\n        headers: headers\n      })\n      .then(response => {\n        console.log(response)\n        if(response.status == 200)\n        {\n  \n            if(response.data.status == 404)\n            {\n                this.errorOccured(404,response.data.error.error,\"Error\")\n            }\n        \n            else if(response.data.status == 200)\n            {\n              this.update_rows(response.data);\n              this.get_next(response.data.Data.links.next)\n                \n            }\n            else\n            {\n                console.log('occ')\n                this.errorOccured(response.data.status,response.error.error,\"Unknown Error Occurred\")\n            }\n        }\n        else\n        {\n            console.log('occ')\n            this.errorOccured(500,\"erro occurred\",\"Unknown error occurred\")\n  \n        }\n        })\n    .catch(error => {\n        console.log('occ')\n        this.errorOccured(500,\"error occurred\",error.message)\n    });\n\n      \n    }\n    \nrender()\n{\n  var Error=this.state.errors.length?this.state.errors.map(error=>{return(<div data-key={error.id} className='alert alert-danger alert-dismissible override'>\n\t<a href=\"#\" onClick={this.deleteError} class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>\n\t<div><strong>error!</strong> {error.error}</div>\n\t<div><strong>message</strong> {error.message}</div>\n\t<div><strong>status</strong> {error.status}</div></div>)}):(\"\")  \n    return(\n      <div> \n        <Menu/>\n        {Error}\n        <div style={{backgroundColor:\"black\",fontSize:\"15px\",color:\"green\"}}>\n        <MDBDataTableV5 className=\"table-responsive\" style={{backgroundColor:\"black\",fontSize:\"20px\",color:\"white\"}} hover entriesOptions={[10, 20, 25]} entries={10} pagesAmount={4} data={this.state.datatable} searchTop searchBottom={false} />\n        </div>\n        <div style={{textAlign:\"left\",backgroundColor:\"black\",fontSize:\"20px\",color:\"white\"}}>\n        <table  style={{width:\"100%\"}}>\n            <tr style={{color:\"red\"}}>\n                <th>Payment Type</th>\n                <th>Amount Paid</th>\n            </tr>\n\n  {console.log(this.payments)}\n  {this.state.payments}\n  <tr>\n    <th style={{color:\"blue\"}}>Total</th>\n    <td style={{color:\"blue\"}}>{this.state.total_amount}</td>\n  </tr>\n</table>\n</div>\n\n      </div>\n\n    )\n   \n}\n}\nexport default Customer;"]},"metadata":{},"sourceType":"module"}