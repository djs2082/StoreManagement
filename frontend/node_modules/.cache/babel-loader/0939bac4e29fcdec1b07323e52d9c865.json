{"ast":null,"code":"import _classCallCheck from\"/home/dilip/Desktop/MERN/himalayadone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dilip/Desktop/MERN/himalayadone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/dilip/Desktop/MERN/himalayadone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dilip/Desktop/MERN/himalayadone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{MDBDataTableV5}from'mdbreact';import Menu from'./menu.component';import'../css/sale.css';import axios from'axios';var Customer=/*#__PURE__*/function(_Component){_inherits(Customer,_Component);var _super=_createSuper(Customer);function Customer(props){var _this;_classCallCheck(this,Customer);_this=_super.call(this,props);_this.update_rows=function(response){console.log(response);var columns=_this.state.datatable.columns;var rows=_this.state.datatable.rows;console.log(columns);console.log(rows);console.log(response.status);if(response.status===200){console.log(response.Data.results);response.Data.results.forEach(function(element){console.log(element);console.log(element.customer);if(element.customer!=null){var row={'fname':element.customer.fname||\"\",'lname':element.customer.lname,'mobile':element.customer.mobile,'amount_payable':element.amount_payable,'total_discount':element.total_discount,'payment_method':element.payment_method.name,'date':element.customer.date,'receipt_pdf':element.receipt_pdf?/*#__PURE__*/React.createElement(\"a\",{href:element.receipt_pdf,target:\"blank\"},\"click\"):\"\"};console.log(row);rows.push(row);}});console.log(columns);console.log(rows);var datatable={columns:columns,rows:rows};_this.setState({datatable:datatable});}};_this.get_next=function(response){console.log(response);var headers={'Authorization':'Token '+sessionStorage.getItem('token')};axios.get(response,{headers:headers}).then(function(result){// console.log(result.data.data.results)\n_this.update_rows(result.data);if(result.data.Data.links.next!=null){_this.get_next(result.data.Data.links.next);}});};_this.componentDidMount=function(){var headers={'Authorization':'Token '+sessionStorage.getItem('token')};axios.get('https://shield.pythonanywhere.com/receipts/',{headers:headers}).then(function(response){// console.log(response.)\n_this.update_rows(response.data);_this.get_next(response.data.Data.links.next);});// axios.get('http://127.0.0.1:8000/payments/payments_today/',{\n//   headers: headers\n// })\n// .then(response =>{\n//   console.log(response)\n//   const payments=response.data.Data.amount_wise_payment_list.map(payment=>{\n//     return(<tr> <th style={{color:\"green\"}}>{payment.name}</th><td>{payment.amount}</td></tr>)\n//   })\n//   console.log(payments)\n//   // this.update_rows(response.data);\n//   // this.get_next(response.data.Data.links.next)\n// })\n};if(sessionStorage.getItem('token')==='undefined'||sessionStorage.getItem('username')==='undefined'){_this.props.history.push('/');}_this.state={datatable:{columns:[{label:'FirstName',field:'fname',width:150},{label:'LastName',field:'lname',width:270},{label:'Mobile',field:'mobile',width:270},{label:'Amount Paid',field:'amount_payable',width:200},{label:'Discount Provided',field:'total_discount',sort:'disabled',width:150},{label:'Payment Type',field:'payment_method',width:270},{label:'Date',field:'date',width:270},{label:'Reciept',field:'receipt_pdf',width:270}],rows:[]}};_this.payments=\"\";var _headers={'Authorization':'Token '+sessionStorage.getItem('token')};axios.get('https://shield.pythonanywhere.com/payments/payments_today/',{headers:_headers}).then(function(response){var payments=response.data.Data.amount_wise_payment_list.map(function(payment){return/*#__PURE__*/React.createElement(\"tr\",null,\" \",/*#__PURE__*/React.createElement(\"th\",{style:{color:\"green\"}},payment.name),/*#__PURE__*/React.createElement(\"td\",null,payment.amount));});var total_amount=response.data.Data.total_amount_paid_today;_this.setState({payments:payments,total_amount:total_amount});});return _this;}_createClass(Customer,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Menu,null),/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:\"black\",fontSize:\"15px\",color:\"green\"}},/*#__PURE__*/React.createElement(MDBDataTableV5,{className:\"table-responsive\",style:{backgroundColor:\"black\",fontSize:\"20px\",color:\"white\"},hover:true,entriesOptions:[10,20,25],entries:10,pagesAmount:4,data:this.state.datatable,searchTop:true,searchBottom:false})),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:\"left\",backgroundColor:\"black\",fontSize:\"20px\",color:\"white\"}},/*#__PURE__*/React.createElement(\"table\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"tr\",{style:{color:\"red\"}},/*#__PURE__*/React.createElement(\"th\",null,\"Payment Type\"),/*#__PURE__*/React.createElement(\"th\",null,\"Amount Paid\")),console.log(this.payments),this.state.payments,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:{color:\"blue\"}},\"Total\"),/*#__PURE__*/React.createElement(\"td\",{style:{color:\"blue\"}},this.state.total_amount)))));}}]);return Customer;}(Component);export default Customer;","map":{"version":3,"sources":["/home/dilip/Desktop/MERN/himalayadone/src/components/sale.component.js"],"names":["React","Component","MDBDataTableV5","Menu","axios","Customer","props","update_rows","response","console","log","columns","state","datatable","rows","status","Data","results","forEach","element","customer","row","fname","lname","mobile","amount_payable","total_discount","payment_method","name","date","receipt_pdf","push","setState","get_next","headers","sessionStorage","getItem","get","then","result","data","links","next","componentDidMount","history","label","field","width","sort","payments","amount_wise_payment_list","map","payment","color","amount","total_amount","total_amount_paid_today","backgroundColor","fontSize","textAlign"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\nimport { MDBDataTableV5 } from 'mdbreact';\nimport Menu from './menu.component'\nimport '../css/sale.css';\nimport axios from 'axios';\n\n\nclass Customer extends Component\n{\nconstructor(props)\n{\n    super(props);\n    if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n      this.props.history.push('/')\n  }\n    this.state={\n        datatable:{\n            columns:[\n                {\n                    label: 'FirstName',\n                    field: 'fname',\n                    width: 150,\n                  },\n                  {\n                    label: 'LastName',\n                    field: 'lname',\n                    width: 270,\n                  },\n                  {\n                    label: 'Mobile',\n                    field: 'mobile',\n                    width: 270,\n                  },\n                  {\n                    label: 'Amount Paid',\n                    field: 'amount_payable',\n                    width: 200,\n                  },\n                  {\n                    label: 'Discount Provided',\n                    field: 'total_discount',\n                    sort: 'disabled',\n                    width: 150,\n                  },\n                  {\n                    label: 'Payment Type',\n                    field: 'payment_method',\n                    width: 270,\n                  },\n                  {\n                    label: 'Date',\n                    field: 'date',\n                    width: 270,\n                  },\n                  {\n                    label: 'Reciept',\n                    field: 'receipt_pdf',\n                    width: 270,\n                  }\n            ],\n            rows: [\n            ],\n        }\n    }\n    this.payments=\"\";\n    var headers = {\n      'Authorization': 'Token '+sessionStorage.getItem('token')\n    }\n    axios.get('https://shield.pythonanywhere.com/payments/payments_today/',{\n      headers: headers\n    })\n    .then(response =>{\n      var payments=response.data.Data.amount_wise_payment_list.map(payment=>{\n        return(<tr> <th style={{color:\"green\"}}>{payment.name}</th><td>{payment.amount}</td></tr>)\n      })\n      var total_amount=response.data.Data.total_amount_paid_today\n      this.setState({payments:payments,total_amount:total_amount})\n    })\n    }\n\n\n\n    update_rows=(response)=>{\n      console.log(response)\n      let columns=this.state.datatable.columns\n      let rows=this.state.datatable.rows\n      console.log(columns);\n      console.log(rows);\n      console.log(response.status)\n      if(response.status === 200)\n      {\n        console.log(response.Data.results)\n      response.Data.results.forEach(element=>{\n        console.log(element)\n        console.log(element.customer)\n        if(element.customer != null)\n        {\n        var row={'fname':element.customer.fname||\"\",'lname':element.customer.lname,'mobile':element.customer.mobile,'amount_payable':element.amount_payable,'total_discount':element.total_discount,'payment_method':element.payment_method.name,'date':element.customer.date,'receipt_pdf':element.receipt_pdf?(<a href={element.receipt_pdf} target=\"blank\">click</a>):(\"\")}\n        console.log(row);\n        rows.push(row)\n        }\n      }\n        )\n      console.log(columns);\n      console.log(rows);\n      let datatable={columns:columns,rows:rows}\n      this.setState({datatable:datatable})\n    }\n  } \n    get_next=(response)=>{\n\n      console.log(response)\n      const headers = {\n        'Authorization': 'Token '+sessionStorage.getItem('token')\n      }\n\n        axios.get(response,{headers:headers})\n        .then(result=>{\n          // console.log(result.data.data.results)\n          this.update_rows(result.data);\n          if(result.data.Data.links.next != null)\n          {\n            this.get_next(result.data.Data.links.next)\n          }\n        })\n      \n    }\n\n    componentDidMount=()=>{\n      const headers = {\n        'Authorization': 'Token '+sessionStorage.getItem('token')\n      }\n      axios.get('https://shield.pythonanywhere.com/receipts/',{\n        headers: headers\n      })\n      .then(response =>{\n        // console.log(response.)\n        this.update_rows(response.data);\n        this.get_next(response.data.Data.links.next)\n      })\n\n      // axios.get('http://127.0.0.1:8000/payments/payments_today/',{\n      //   headers: headers\n      // })\n      // .then(response =>{\n\n      //   console.log(response)\n      //   const payments=response.data.Data.amount_wise_payment_list.map(payment=>{\n      //     return(<tr> <th style={{color:\"green\"}}>{payment.name}</th><td>{payment.amount}</td></tr>)\n      //   })\n      //   console.log(payments)\n      //   // this.update_rows(response.data);\n      //   // this.get_next(response.data.Data.links.next)\n      // })\n      \n    }\n    \nrender()\n{\n    return(\n      <div> \n        <Menu/>\n        <div style={{backgroundColor:\"black\",fontSize:\"15px\",color:\"green\"}}>\n        <MDBDataTableV5 className=\"table-responsive\" style={{backgroundColor:\"black\",fontSize:\"20px\",color:\"white\"}} hover entriesOptions={[10, 20, 25]} entries={10} pagesAmount={4} data={this.state.datatable} searchTop searchBottom={false} />\n        </div>\n        <div style={{textAlign:\"left\",backgroundColor:\"black\",fontSize:\"20px\",color:\"white\"}}>\n        <table  style={{width:\"100%\"}}>\n            <tr style={{color:\"red\"}}>\n                <th>Payment Type</th>\n                <th>Amount Paid</th>\n            </tr>\n  {/* <tr>\n    <th style={{color:\"green\"}}>Cash</th>\n    <td>15000</td>\n  </tr>\n  <tr>\n    <th style={{color:\"green\"}}>Google Pay</th>\n    <td>5000</td>\n  </tr>\n  <tr>\n    <th style={{color:\"green\"}}>Paytm</th>\n    <td>1000</td>\n  </tr>\n  <tr>\n    <th style={{color:\"green\"}}>PhonePay</th>\n    <td>150</td>\n  </tr> */}\n  {console.log(this.payments)}\n  {this.state.payments}\n  <tr>\n    <th style={{color:\"blue\"}}>Total</th>\n    <td style={{color:\"blue\"}}>{this.state.total_amount}</td>\n  </tr>\n</table>\n</div>\n\n      </div>\n\n    )\n   \n}\n}\nexport default Customer;"]},"metadata":{},"sourceType":"module"}