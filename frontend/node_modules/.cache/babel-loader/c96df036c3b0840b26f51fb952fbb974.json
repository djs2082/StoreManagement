{"ast":null,"code":"var _jsxFileName = \"/frontend/src/components/statistics.component.js\";\nimport React, { Component } from 'react';\nimport Chart from \"react-google-charts\";\nimport Menu from './menu.component';\nimport axios from 'axios';\n\nclass Graph extends Component {\n  constructor(props) {\n    super(props);\n\n    this.errorOccured = (status, err, message) => {\n      let error = {\n        \"id\": this.state.errors.length + 1,\n        \"status\": status,\n        \"error\": err,\n        \"message\": message\n      };\n      let errors = this.state.errors;\n      errors.push(error);\n      this.setState(errors);\n    };\n\n    this.deleteError = e => {\n      let key = e.currentTarget.parentNode.getAttribute(\"data-key\");\n      let errors = this.state.errors.filter(error => {\n        return parseInt(error.id) !== parseInt(key);\n      });\n      this.setState({\n        errors: errors\n      });\n    };\n\n    this.componentDidMount = () => {\n      var headers = {\n        'Authorization': 'Token ' + sessionStorage.getItem('token')\n      };\n      axios.get(window.API_URL + '/receipts/sales_for_graph/', {\n        headers: headers\n      }).then(response => {\n        if (response.status == 200) {\n          if (response.data.status == 404) {\n            this.errorOccured(404, response.data.error.error, \"Error\");\n          } else if (response.data.status == 200) {\n            var data = [];\n\n            if (response.data.status != 404) {\n              data.push(this.state.data);\n              response.data.Data.date_wise_payment_list.map(sell => {\n                let temp = [];\n                temp.push(sell.date);\n                temp.push(sell.amount);\n                data.push(temp);\n              });\n            }\n\n            this.setState({\n              graph_data: data\n            });\n          } else {\n            this.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\");\n          }\n        } else {\n          this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\");\n        }\n      }).catch(error => {\n        this.errorOccured(500, \"error occurred\", error.message);\n      });\n    };\n\n    if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n      this.props.history.push('/');\n    }\n\n    this.state = {\n      data: ['Sale', ''],\n      errors: []\n    };\n  }\n\n  render() {\n    var Error = this.state.errors.length ? this.state.errors.map(error => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-key\": error.id,\n        className: \"alert alert-danger alert-dismissible override\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.deleteError,\n        class: \"close\",\n        \"data-dismiss\": \"alert\",\n        \"aria-label\": \"close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 5\n        }\n      }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 10\n        }\n      }, \"error!\"), \" \", error.error), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 10\n        }\n      }, \"message\"), \" \", error.message), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 10\n        }\n      }, \"status\"), \" \", error.status));\n    }) : \"\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 4\n      }\n    }, Error, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        maxWidth: 900\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Chart, {\n      width: 1400,\n      height: 1300,\n      chartType: \"ColumnChart\",\n      loader: /*#__PURE__*/React.createElement(\"h1\", {\n        style: {\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }\n      }, \"...Loading Chart\"),\n      data: this.state.graph_data,\n      options: {\n        title: 'Sales of This Month',\n        chartArea: {\n          maxWidth: '75%',\n          maHeight: '75%',\n          backgroundColor: \"black\"\n        },\n        hAxis: {\n          title: 'Date'\n        },\n        vAxis: {\n          title: 'Sale'\n        }\n      },\n      legendToggle: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 6\n      }\n    })));\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["/frontend/src/components/statistics.component.js"],"names":["React","Component","Chart","Menu","axios","Graph","constructor","props","errorOccured","status","err","message","error","state","errors","length","push","setState","deleteError","e","key","currentTarget","parentNode","getAttribute","filter","parseInt","id","componentDidMount","headers","sessionStorage","getItem","get","window","API_URL","then","response","data","Data","date_wise_payment_list","map","sell","temp","date","amount","graph_data","catch","history","render","Error","display","maxWidth","color","title","chartArea","maHeight","backgroundColor","hAxis","vAxis"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Chart from \"react-google-charts\";\nimport Menu from './menu.component';\nimport axios from 'axios';\n\nclass Graph extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tif (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n\t\t\tthis.props.history.push('/')\n\t\t}\n\t\tthis.state = {\n\t\t\tdata: ['Sale', ''],\n\t\t\terrors: []\n\t\t}\n\t}\n\terrorOccured = (status, err, message) => {\n\t\tlet error = { \"id\": this.state.errors.length + 1, \"status\": status, \"error\": err, \"message\": message }\n\t\tlet errors = this.state.errors\n\t\terrors.push(error)\n\n\t\tthis.setState(errors)\n\t}\n\n\tdeleteError = (e) => {\n\t\tlet key = e.currentTarget.parentNode.getAttribute(\"data-key\");\n\n\t\tlet errors = this.state.errors.filter(error => {\n\t\t\treturn parseInt(error.id) !== parseInt(key);\n\t\t})\n\t\tthis.setState({ errors: errors })\n\t}\n\tcomponentDidMount = () => {\n\t\tvar headers = {\n\t\t\t'Authorization': 'Token ' + sessionStorage.getItem('token')\n\t\t}\n\t\taxios.get(window.API_URL+'/receipts/sales_for_graph/', {\n\t\t\theaders: headers\n\t\t})\n\t\t\t.then(response => {\n\t\t\t\tif (response.status == 200) {\n\n\t\t\t\t\tif (response.data.status == 404) {\n\t\t\t\t\t\tthis.errorOccured(404, response.data.error.error, \"Error\")\n\t\t\t\t\t}\n\n\t\t\t\t\telse if (response.data.status == 200) {\n\t\t\t\t\t\tvar data = []\n\t\t\t\t\t\tif (response.data.status != 404) {\n\t\t\t\t\t\t\tdata.push(this.state.data)\n\n\t\t\t\t\t\t\tresponse.data.Data.date_wise_payment_list.map(sell => {\n\t\t\t\t\t\t\t\tlet temp = []\n\t\t\t\t\t\t\t\ttemp.push(sell.date)\n\t\t\t\t\t\t\t\ttemp.push(sell.amount)\n\t\t\t\t\t\t\t\tdata.push(temp)\n\n\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState({ graph_data: data })\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\n\t\t\t\t\t\tthis.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\")\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\tthis.errorOccured(500, \"erro occurred\", \"Unknown error occurred\")\n\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\n\t\t\t\tthis.errorOccured(500, \"error occurred\", error.message)\n\t\t\t});\n\n\t}\n\trender() {\n\t\tvar Error = this.state.errors.length ? this.state.errors.map(error => {\n\t\t\treturn (<div data-key={error.id} className='alert alert-danger alert-dismissible override'>\n\t\t\t\t<a href=\"#\" onClick={this.deleteError} class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>\n\t\t\t\t<div><strong>error!</strong> {error.error}</div>\n\t\t\t\t<div><strong>message</strong> {error.message}</div>\n\t\t\t\t<div><strong>status</strong> {error.status}</div></div>)\n\t\t}) : (\"\")\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{Error}\n\t\t\t\t<Menu></Menu>\n\t\t\t\t<div style={{ display: 'flex', maxWidth: 900 }}>\n\t\t\t\t\t<Chart\n\t\t\t\t\t\twidth={1400}\n\t\t\t\t\t\theight={1300}\n\t\t\t\t\t\tchartType=\"ColumnChart\"\n\t\t\t\t\t\tloader={<h1 style={{ color: \"black\" }}>...Loading Chart</h1>}\n\t\t\t\t\t\tdata={this.state.graph_data}\n\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\ttitle: 'Sales of This Month',\n\t\t\t\t\t\t\tchartArea: { maxWidth: '75%', maHeight: '75%', backgroundColor: \"black\" },\n\t\t\t\t\t\t\thAxis: {\n\t\t\t\t\t\t\t\ttitle: 'Date',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tvAxis: {\n\t\t\t\t\t\t\t\ttitle: 'Sale',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tlegendToggle\n\t\t\t\t\t/>\n\n\t\t\t\t</div></div>)\n\t}\n}\nexport default Graph;"]},"metadata":{},"sourceType":"module"}