{"ast":null,"code":"import _toConsumableArray from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'../css/home.css';import Menu from'./menu.component';import axios from'axios';import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import Loader from'react-loader-advanced';var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.errorOccured=function(status,err,message){var error={\"id\":_this.state.errors.length+1,\"status\":status,\"error\":err,\"message\":message};var errors=_this.state.errors;errors.push(error);_this.setState(errors);};_this.deleteError=function(e){var key=e.currentTarget.parentNode.getAttribute(\"data-key\");var errors=_this.state.errors.filter(function(error){return parseInt(error.id)!==parseInt(key);});_this.setState({errors:errors});};_this.get_pdf=function(e){_this.setState({loaded:true});var error=false;var data=_objectSpread({},_this.state);e.preventDefault();if(data.payment_method===\"\"||data.payment_method===\"None\"){_this.errorOccured(404,\"erro occurred\",\"Payment Option is not provided\");error=true;}data.items.map(function(item){if(item.item==\"\"||item.item=='Select Item'||item.brand==='Select Brand'||item.brand===\"\"){_this.errorOccured(400,\"erro occurred\",\"something in not provided in item \"+item.id);error=true;}});_this.state.payment_options.map(function(option){if(option.name===data.payment_method){data.payment_method=option.id;}});try{if(data.birth_day===\"\"){if(window.confirm('DOB is not provided, Do you wish to continue??')){data.birth_day=\"\";}else{error=true;}}else{data.birth_day=_this.formatDate(data.birth_day);}}catch(error){_this.errorOccured(400,\"error occurred in dob\",error.message);}if(error===true){data.birth_day=\"\";return false;}try{data.items.map(function(item){data.categories.map(function(category){if(item.item===category.name){item.item=category.id;category.brands.map(function(brand){if(brand.name===item.brand){item.brand=brand.id;}});}});});}catch(error){_this.errorOccured(400,\"error occurred\",error.message);}var headers={'Authorization':'Token '+sessionStorage.getItem('token')};axios.post(window.API_URL+'/receipts/',data,{headers:headers}).then(function(response){_this.setState({loaded:false});if(response.status==200){if(response.data.status==404){_this.errorOccured(404,response.data.error.error,\"Error Submitting\");}else if(response.data.status==200){window.open(window.API_URL+response.data.Data.receipt_link);}else{_this.errorOccured(response.data.status,response.error.error,\"Unknown Error Occurred\");}}else{_this.errorOccured(500,\"erro occurred\",\"Unknown error occurred\");}}).catch(function(error){_this.errorOccured(500,\"error occurred\",error.toString());});};_this.handleChange=function(e){try{var data=e.target.value;var money=_this.find_sum();_this.setState(_defineProperty({},e.target.name,data),function(){var money=_this.find_sum();_this.setState({total_amount:money[0],amount_payable:money[2],total_discount:money[1]});});}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};_this.formatDate=function(date){try{var d=new Date(date),month=''+(d.getMonth()+1),day=''+d.getDate(),year=d.getFullYear();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;return[year,month,day].join('-');}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};_this.onChange=function(birth_day){try{_this.setState({birth_day:birth_day});}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};_this.add_item=function(){var item={\"id\":_this.state.items.length+1,\"item\":\"\",\"brand\":\"\",\"size\":\"\",\"quantity\":1,\"selling_price\":0,\"deleteable\":true};try{var items=[].concat(_toConsumableArray(_this.state.items),[item]);_this.setState({items:items});}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};_this.delete_item=function(e){try{var key=e.currentTarget.parentNode.parentNode.getAttribute(\"data-key\");var items=_this.state.items.filter(function(item){return parseInt(item.id)!==parseInt(key);});_this.setState({items:items},function(){var money=_this.find_sum();_this.setState({total_amount:money[0],amount_payable:money[2],total_discount:money[1]});});}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};_this.update_item=function(e){try{var key=e.currentTarget.parentNode.parentNode.parentNode.getAttribute(\"data-key\");var name=e.currentTarget.getAttribute(\"name\");var value=e.currentTarget.value;var price=0;var quantity=0;var actual_cost_price=0;var found=false;if(value===\"\"){if(name!=\"size\"){return;}}var items=_this.state.items.length?_this.state.items.map(function(item){if(parseInt(item.id)===parseInt(key)){item[name]=value;if(name==\"brand\"){_this.state.categories.map(function(category){if(item.item===category.name){category.brands.map(function(brand){if(brand.name===value){item.selling_price=brand.actual_cost_price;item.actual_price=brand.cost_price;found=true;}});}if(found==false){item.selling_price=0;item.actual_price=0;}});}}return item;}):[];var money=_this.find_sum();_this.setState({total_amount:money[0],amount_payable:money[2],total_discount:money[1]});}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};_this.getBrands=function(id){try{var brands=_this.state.categories.filter(function(category){return parseInt(category.id)==parseInt(id);});return brands[0].brands;}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};_this.find_sum=function(quantity,value){var money=new Array(3).fill(0);try{var discount=parseInt(_this.state.discount_given?_this.state.discount_given:0);_this.state.items.forEach(function(item){var price=parseInt(item.selling_price);var quantity=parseInt(item.quantity);money[0]=parseInt(money[0])+parseInt(price)*parseInt(quantity);});money[1]=Math.round(discount*money[0]/100.0);money[2]=money[0]-money[1];return money;}catch(error){_this.errorOccured(400,\"error occurred\",error.toString());}};var _date=new Date();if(sessionStorage.getItem('token')==='undefined'||sessionStorage.getItem('username')==='undefined'){_this.props.history.push('/');}_this.state={fname:\"\",lname:\"\",mobile:\"\",payment_method:\"\",birth_day:\"\",items:[{\"id\":1,\"item\":\"\",\"brand\":\"\",\"size\":\"\",\"quantity\":1,\"selling_price\":0,\"deleteable\":false}],discount_given:0,total_amount:0,total_discount:0,amount_payable:0,payment_options:[],categories:[],sizes:[],errors:[],loaded:false};var _headers={'Authorization':'Token '+sessionStorage.getItem('token')};axios.get(window.API_URL+'/payments/',{headers:_headers}).then(function(response){if(response.status==200){if(response.data.status==404){_this.errorOccured(404,response.data.error.error,\"No payment options to display\");}else if(response.data.status==200){_this.setState({payment_options:response.data.Data});}else{_this.errorOccured(response.data.status,response.error.error,\"Unknown Error Occurred\");}}else{_this.errorOccured(500,\"erro occurred\",\"Unknown error occurred\");}}).catch(function(error){_this.errorOccured(500,\"error occurred\",error.message);});axios.get(window.API_URL+'/items/itemsBrand/',{headers:_headers}).then(function(response){if(response.status==200){if(response.data.status==404){_this.errorOccured(404,response.data.error.error,\"No Itmes to display\");}else if(response.data.status==200){var categories=response.data.Data;_this.setState({categories:categories});}else{_this.errorOccured(response.data.status,response.error.error,\"Unknown Error Occurred\");}}else{_this.errorOccured(500,\"erro occurred\",\"Unknown error occurred\");}}).catch(function(error){_this.errorOccured(500,\"error occurred\",error.message);});axios.get(window.API_URL+'/sizes/',{headers:_headers}).then(function(response){_this.setState({sizes:response.data.Data});}).catch(function(error){_this.errorOccured(500,\"error occurred\",error.message);});var _money=_this.find_sum();_this.setState({total_amount:_money[0],amount_payable:_money[2],total_discount:_money[1]});return _this;}_createClass(Home,[{key:\"render\",value:function render(){var _this2=this;var payments=this.state.payment_options.length?this.state.payment_options.map(function(option){return/*#__PURE__*/React.createElement(\"option\",{key:option.id},option.name);}):\"\";var categories=this.state.categories.length?this.state.categories.map(function(category){return/*#__PURE__*/React.createElement(\"option\",{key:category.id},category.name);}):\"\";var sizes=this.state.sizes.length?this.state.sizes.map(function(size){return/*#__PURE__*/React.createElement(\"option\",{key:size.id},size.name);}):\" \";var Error=this.state.errors.length?this.state.errors.map(function(error){return/*#__PURE__*/React.createElement(\"div\",{\"data-key\":error.id,className:\"alert alert-danger alert-dismissible override\"},/*#__PURE__*/React.createElement(\"a\",{href:\"#\",onClick:_this2.deleteError,class:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"close\"},\"\\xD7\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"error!\"),\" \",error.error),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"message\"),\" \",error.message),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"status\"),\" \",error.status));}):\"\";var items=this.state.items.length?this.state.items.map(function(item){var temp=_this2.state.categories.filter(function(category){if(item.item==category.name){return category;}});var brands=\"\";try{brands=temp[0].brands.length?temp[0].brands.map(function(brand){return/*#__PURE__*/React.createElement(\"option\",{key:brand.id},brand.name);}):\" \";}catch(e){console.log(e);}return/*#__PURE__*/React.createElement(\"div\",{\"data-key\":item.id,className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"select\",{onChange:_this2.update_item,type:\"text\",value:item.item,className:\"form-control item\",name:\"item\",placeholder:\"Item\",required:true},\"(\",/*#__PURE__*/React.createElement(\"option\",{key:\"-1\"},\"Select Itme\"),categories))),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"select\",{onChange:_this2.update_item,type:\"text\",value:item.brand,className:\"form-control item\",name:\"brand\",placeholder:\"Brand\",required:true},/*#__PURE__*/React.createElement(\"option\",{key:\"-1\"},\"Select Brand\"),brands))),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"input\",{onChange:_this2.update_item,type:\"text\",value:item.size,className:\"form-control item\",name:\"size\",placeholder:\"Size\",list:\"sizes\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"input\",{autoComplete:\"off\",onChange:_this2.update_item,type:\"number\",value:item.quantity,className:\"form-control item\",min:\"1\",name:\"quantity\",placeholder:\"Quantity/Pairs\",required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"input\",{autoComplete:\"off\",type:\"number\",value:item.actual_price,className:\"form-control item \",min:\"0\",name:\"actual_price\",placeholder:\"Price\",readOnly:\"True\",required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"input\",{autoComplete:\"off\",onChange:_this2.update_item,type:\"number\",value:item.selling_price,className:\"form-control item \",min:\"0\",name:\"selling_price\",placeholder:\"Price\",required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-postpend column\",style:{width:\"10%\"}},item.deleteable?/*#__PURE__*/React.createElement(\"span\",{onClick:_this2.delete_item},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-times-circle add-btn\"})):/*#__PURE__*/React.createElement(\"span\",{onClick:_this2.add_item,id:\"add-item\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus-circle add-btn\"}))));}):\"\";return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Loader,{show:this.state.loaded,message:/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))},Error,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center h-100\"},/*#__PURE__*/React.createElement(Menu,null),/*#__PURE__*/React.createElement(\"div\",{style:{maxWidth:\"800px\"},className:\"card float-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},/*#__PURE__*/React.createElement(\"h3\",null,window.RECIEPT_MESSAGE)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 col-sm-offset-4 card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.get_pdf,id:\"login_form\"},/*#__PURE__*/React.createElement(\"label\",{style:{color:\"white\"},className:\"float-left\",for:\"fname\"},/*#__PURE__*/React.createElement(\"b\",null,\"Enter First Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group\"},/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,type:\"text\",value:this.state.fname,className:\"form-control input-sm\",id:\"fname\",name:\"fname\",placeholder:\"First Name\",required:true})),/*#__PURE__*/React.createElement(\"label\",{style:{color:\"white\"},className:\"float-left\",for:\"lname\"},/*#__PURE__*/React.createElement(\"b\",null,\"Enter Last Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group\"},/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,type:\"text\",className:\"form-control\",value:this.state.lname,id:\"lname\",name:\"lname\",placeholder:\"Last Name\",required:true})),/*#__PURE__*/React.createElement(\"label\",{style:{color:\"white\"},className:\"float-left\",for:\"mobile\"},/*#__PURE__*/React.createElement(\"b\",null,\"Enter Mobile No:\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group\"},/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,type:\"tel\",value:this.state.mobile,className:\"form-control\",id:\"mobile\",placeholder:\"Mobile Number\",name:\"mobile\",pattern:\"[0-9]{10}\",required:true})),/*#__PURE__*/React.createElement(\"label\",{style:{color:\"white\"},className:\"float-left\",for:\"payment\"},/*#__PURE__*/React.createElement(\"b\",null,\"Enter Payment Mode\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group\"},/*#__PURE__*/React.createElement(\"select\",{onChange:this.handleChange,value:this.state.payment_method,id:\"payment\",name:\"payment_method\",className:\"form-control\"},/*#__PURE__*/React.createElement(\"option\",null,\" None\"),payments)),/*#__PURE__*/React.createElement(\"label\",{style:{color:\"white\"},className:\"float-left\",for:\"dob\"},/*#__PURE__*/React.createElement(\"b\",null,\"Enter Date of Birth\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group\"},/*#__PURE__*/React.createElement(DatePicker,{maxDate:new Date(),placeholderText:\"Enter DOB\",dateFormat:\"dd/MM/yyyy\",selected:this.state.birth_day,onChange:this.onChange})),/*#__PURE__*/React.createElement(\"div\",{id:\"items-cart\"},items,/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group float-right price-tag\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-rupee\"}))),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",value:this.state.amount_payable,readOnly:true,id:\"amount\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group float-right price-tag\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-percent\"}))),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",onChange:this.handleChange,name:\"discount_given\",value:this.state.discount_given,className:\"form-control\",min:\"0\",max:\"100\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Submit\",className:\"btn-lg login_btn\"}))),/*#__PURE__*/React.createElement(\"datalist\",{id:\"sizes\"},sizes))))));}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["/home/dilip/Desktop/MERN/himalayadonelocal2/src/components/home.component.js"],"names":["React","Component","Menu","axios","DatePicker","Loader","Home","props","errorOccured","status","err","message","error","state","errors","length","push","setState","deleteError","e","key","currentTarget","parentNode","getAttribute","filter","parseInt","id","get_pdf","loaded","data","preventDefault","payment_method","items","map","item","brand","payment_options","option","name","birth_day","window","confirm","formatDate","categories","category","brands","headers","sessionStorage","getItem","post","API_URL","then","response","open","Data","receipt_link","catch","toString","handleChange","target","value","money","find_sum","total_amount","amount_payable","total_discount","date","d","Date","month","getMonth","day","getDate","year","getFullYear","join","onChange","add_item","delete_item","update_item","price","quantity","actual_cost_price","found","selling_price","actual_price","cost_price","getBrands","Array","fill","discount","discount_given","forEach","Math","round","history","fname","lname","mobile","sizes","get","payments","size","Error","temp","console","log","width","deleteable","maxWidth","RECIEPT_MESSAGE","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../css/home.css';\nimport Menu from './menu.component'\nimport axios from 'axios';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Loader from 'react-loader-advanced';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props)\n        let date = new Date();\n        if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n            this.props.history.push('/')\n        }\n        this.state = {\n            fname: \"\",\n            lname: \"\",\n            mobile: \"\",\n            payment_method: \"\",\n            birth_day: \"\",\n            items: [\n                {\n                    \"id\": 1,\n                    \"item\": \"\",\n                    \"brand\": \"\",\n                    \"size\": \"\",\n                    \"quantity\": 1,\n                    \"selling_price\": 0,\n                    \"deleteable\": false\n                }\n            ],\n            discount_given: 0,\n            total_amount: 0,\n            total_discount: 0,\n            amount_payable: 0,\n            payment_options: [],\n            categories: [],\n            sizes: [],\n            errors: [],\n            loaded: false,\n        }\n        const headers = { 'Authorization': 'Token ' + sessionStorage.getItem('token') }\n\n        axios.get(window.API_URL+'/payments/', { headers: headers })\n            .then(response => {\n                if (response.status == 200) {\n\n                    if (response.data.status == 404) {\n                        this.errorOccured(404, response.data.error.error, \"No payment options to display\")\n                    }\n\n\n\n                    else if (response.data.status == 200) {\n                        this.setState({ payment_options: response.data.Data })\n\n                    }\n                    else {\n                        this.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\")\n                    }\n                }\n                else {\n                    this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\")\n\n                }\n            })\n            .catch(error => {\n                this.errorOccured(500, \"error occurred\", error.message)\n            });\n\n\n        axios.get(window.API_URL+'/items/itemsBrand/', { headers: headers })\n            .then(response => {\n                if (response.status == 200) {\n\n                    if (response.data.status == 404) {\n                        this.errorOccured(404, response.data.error.error, \"No Itmes to display\")\n                    }\n                    else if (response.data.status == 200) {\n                        let categories = response.data.Data\n                        this.setState({ categories: categories })\n\n                    }\n                    else {\n                        this.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\")\n                    }\n                }\n                else {\n                    this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\")\n\n                }\n            })\n            .catch(error => {\n                this.errorOccured(500, \"error occurred\", error.message)\n            });\n\n\n        axios.get(window.API_URL+'/sizes/', { headers: headers })\n            .then(response => {\n                this.setState({ sizes: response.data.Data })\n            })\n            .catch(error => {\n                this.errorOccured(500, \"error occurred\", error.message)\n            })\n        let money = this.find_sum()\n        this.setState({ total_amount: money[0], amount_payable: money[2], total_discount: money[1] })\n\n    }\n\n    errorOccured = (status, err, message) => {\n        let error = { \"id\": this.state.errors.length + 1, \"status\": status, \"error\": err, \"message\": message }\n        let errors = this.state.errors\n        errors.push(error)\n        this.setState(errors)\n    }\n\n    deleteError = (e) => {\n        let key = e.currentTarget.parentNode.getAttribute(\"data-key\");\n        let errors = this.state.errors.filter(error => {\n            return parseInt(error.id) !== parseInt(key);\n        })\n        this.setState({ errors: errors })\n    }\n\n\n\n    get_pdf = (e) => {\n        this.setState({loaded:true})\n        var error = false;\n        var data={...this.state}\n        e.preventDefault();\n        if (data.payment_method === \"\" || data.payment_method === \"None\") {\n            this.errorOccured(404, \"erro occurred\", \"Payment Option is not provided\")\n            error = true;\n        }\n        data.items.map(item => {\n            if (item.item == \"\" || item.item == 'Select Item' || item.brand === 'Select Brand' || item.brand === \"\") {\n                this.errorOccured(400, \"erro occurred\", \"something in not provided in item \" + item.id)\n                error = true;\n            }\n        })\n\n\n        this.state.payment_options.map(option => {\n\n            if (option.name === data.payment_method) {\n                data.payment_method = option.id\n            }\n        })\n\n        try {\n            if (data.birth_day === \"\") {\n                if (window.confirm('DOB is not provided, Do you wish to continue??')) {\n                    data.birth_day = \"\"\n                }\n                else {\n                    error = true;\n                }\n            }\n            else {\n\n                data.birth_day = this.formatDate(data.birth_day)\n\n            }\n\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred in dob\", error.message)\n\n        }\n        if (error === true) {\n            data.birth_day=\"\"\n            return false;\n        }\n        try {\n            data.items.map(item => {\n                data.categories.map(category => {\n                    if (item.item === category.name) {\n                        item.item = category.id\n                        category.brands.map(brand => {\n                            if (brand.name === item.brand) {\n                                item.brand = brand.id\n                            }\n\n                        })\n                    }\n                })\n            })\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.message)\n        }\n\n\n        const headers = {\n            'Authorization': 'Token ' + sessionStorage.getItem('token')\n        }\n        axios.post(window.API_URL+'/receipts/', data, {\n            headers: headers,\n        })\n            .then(response => {\n                this.setState({loaded:false})\n                if (response.status == 200) {\n\n\n                    if (response.data.status == 404) {\n                        this.errorOccured(404, response.data.error.error, \"Error Submitting\")\n                    }\n                    else if (response.data.status == 200) {\n                        window.open(window.API_URL + response.data.Data.receipt_link);\n\n                    }\n                    else {\n                        this.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\")\n                    }\n                }\n                else {\n                    this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\")\n\n                }\n            })\n            .catch(error => {\n\n                this.errorOccured(500, \"error occurred\", error.toString())\n            });\n    }\n\n\n\n\n    handleChange = (e) => {\n        try {\n            var data = e.target.value;\n            var money = this.find_sum()\n            this.setState({\n                [e.target.name]: data\n            }, () => { let money = this.find_sum(); this.setState({ total_amount: money[0], amount_payable: money[2], total_discount: money[1] }) })\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.toString())\n\n        }\n    }\n\n    formatDate = (date) => {\n        try {\n            var d = new Date(date),\n                month = '' + (d.getMonth() + 1),\n                day = '' + d.getDate(),\n                year = d.getFullYear();\n\n            if (month.length < 2)\n                month = '0' + month;\n            if (day.length < 2)\n                day = '0' + day;\n\n            return [year, month, day].join('-');\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.toString())\n\n        }\n    }\n\n    onChange = (birth_day) => {\n        try {\n            this.setState({ birth_day: birth_day });\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.toString())\n        }\n    }\n\n\n    add_item = () => {\n        let item = {\n            \"id\": this.state.items.length + 1,\n            \"item\": \"\",\n            \"brand\": \"\",\n            \"size\": \"\",\n            \"quantity\": 1,\n            \"selling_price\": 0,\n            \"deleteable\": true,\n        }\n        try {\n            let items = [...this.state.items, item];\n            this.setState({\n                items: items\n            });\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.toString())\n\n        }\n    };\n\n\n    delete_item = (e) => {\n        try {\n            let key = e.currentTarget.parentNode.parentNode.getAttribute(\"data-key\");\n            let items = this.state.items.filter(item => {\n                return parseInt(item.id) !== parseInt(key);\n            })\n            this.setState({ items: items }, () => { let money = this.find_sum(); this.setState({ total_amount: money[0], amount_payable: money[2], total_discount: money[1] }) })\n\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.toString())\n\n        }\n    }\n\n\n\n    update_item = (e) => {\n        try {\n            let key = e.currentTarget.parentNode.parentNode.parentNode.getAttribute(\"data-key\");\n            let name = e.currentTarget.getAttribute(\"name\")\n            let value = e.currentTarget.value\n            let price = 0\n            let quantity = 0\n            let actual_cost_price = 0\n            let found = false;\n            if (value === \"\") {\n\n                if (name != \"size\") {\n                    return;\n                }\n            }\n            const items = this.state.items.length ? (this.state.items.map(item => {\n                if (parseInt(item.id) === parseInt(key)) {\n                    item[name] = value;\n                    if (name == \"brand\") {\n                        this.state.categories.map(category => {\n                            if (item.item === category.name) {\n\n                                category.brands.map(brand => {\n                                    if (brand.name === value) {\n                                        item.selling_price = brand.actual_cost_price\n                                        item.actual_price = brand.cost_price\n                                        found = true\n                                    }\n                                })\n                            }\n                            if (found == false) {\n                                item.selling_price = 0\n                                item.actual_price = 0\n\n                            }\n\n                        })\n                    }\n                }\n\n                return (item)\n            })) : ([])\n            let money = this.find_sum()\n\n            this.setState({ total_amount: money[0], amount_payable: money[2], total_discount: money[1] })\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.toString())\n\n        }\n\n    }\n\n\n\n    getBrands = (id) => {\n        try {\n            const brands = this.state.categories.filter(category => {\n                return parseInt(category.id) == parseInt(id)\n            })\n            return (brands[0].brands)\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.toString())\n\n        }\n    }\n\n\n    find_sum = (quantity, value) => {\n        var money = new Array(3).fill(0)\n        try {\n            var discount = parseInt(this.state.discount_given ? (this.state.discount_given) : 0)\n            this.state.items.forEach((item) => {\n                let price = parseInt(item.selling_price)\n                let quantity = parseInt(item.quantity)\n                money[0] = parseInt(money[0]) + parseInt(price) * parseInt(quantity)\n            });\n            money[1] = Math.round((discount * money[0]) / 100.0)\n            money[2] = money[0] - money[1]\n            return money;\n        }\n        catch (error) {\n            this.errorOccured(400, \"error occurred\", error.toString())\n\n        }\n    }\n\n\n\n    render() {\n\n\n        const payments = this.state.payment_options.length ? (this.state.payment_options.map(option => {\n            return (<option key={option.id}>{option.name}</option>)\n        })) : (\"\");\n\n\n\n\n\n        const categories = this.state.categories.length ? (this.state.categories.map(category => {\n            return (<option key={category.id}>{category.name}</option>)\n        })) : (\"\");\n\n\n\n        const sizes = this.state.sizes.length ? (this.state.sizes.map(size => {\n            return (<option key={size.id}>{size.name}</option>)\n        })) : (\" \")\n\n        var Error = this.state.errors.length ? this.state.errors.map(error => {\n            return (<div data-key={error.id} className='alert alert-danger alert-dismissible override'>\n                <a href=\"#\" onClick={this.deleteError} class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>\n                <div><strong>error!</strong> {error.error}</div>\n                <div><strong>message</strong> {error.message}</div>\n                <div><strong>status</strong> {error.status}</div></div>)\n        }) : (\"\")\n\n        const items = this.state.items.length ? (this.state.items.map(item => {\n            const temp = this.state.categories.filter(category => {\n\n                if (item.item == category.name) {\n                    return category\n                }\n\n\n            })\n            let brands = \"\"\n            try {\n                brands = temp[0].brands.length ? (temp[0].brands.map(brand => {\n                    return (<option key={brand.id}>{brand.name}</option>)\n                })) : (\" \")\n            }\n            catch (e) {\n                console.log(e)\n            }\n\n\n\n            return (\n                <div data-key={item.id} className=\"row\">\n                    <div className=\"column\">\n                        <div style={{ width: \"100%\" }}><select onChange={this.update_item} type=\"text\" value={item.item} className=\"form-control item\" name=\"item\" placeholder=\"Item\" required>(<option key=\"-1\">Select Itme</option>{categories}</select></div>\n                    </div>\n\n                    <div className=\"column\">\n                        <div style={{ width: \"100%\" }}><select onChange={this.update_item} type=\"text\" value={item.brand} className=\"form-control item\" name=\"brand\" placeholder=\"Brand\" required><option key=\"-1\" >Select Brand</option>{brands}</select></div>\n                    </div>\n\n\n                    <div className=\"column\">\n                        <div style={{ width: \"100%\" }}><input onChange={this.update_item} type=\"text\" value={item.size} className=\"form-control item\" name=\"size\" placeholder=\"Size\" list=\"sizes\"></input></div>\n                    </div>\n                    <div className=\"column\">\n                        <div style={{ width: \"100%\" }}><input autoComplete=\"off\" onChange={this.update_item} type=\"number\" value={item.quantity} className=\"form-control item\" min=\"1\" name=\"quantity\" placeholder=\"Quantity/Pairs\" required /></div>\n                    </div>\n                    <div className=\"column\">\n                        <div style={{ width: \"100%\" }}><input autoComplete=\"off\" type=\"number\" value={item.actual_price} className=\"form-control item \" min=\"0\" name=\"actual_price\" placeholder=\"Price\" readOnly=\"True\" required /></div>\n                    </div>\n                    <div className=\"column\">\n                        <div style={{ width: \"100%\" }}><input autoComplete=\"off\" onChange={this.update_item} type=\"number\" value={item.selling_price} className=\"form-control item \" min=\"0\" name=\"selling_price\" placeholder=\"Price\" required /></div>\n                    </div>\n                    <div className=\"input-group-postpend column\" style={{ width: \"10%\" }}>\n                        {item.deleteable ? (<span onClick={this.delete_item} ><i className=\"fa fa-times-circle add-btn\"></i></span>) : (<span onClick={this.add_item} id=\"add-item\" ><i className=\"fa fa-plus-circle add-btn\"></i></span>)}\n                    </div>\n                </div>)\n\n        })) : (\"\");\n\n        return (\n            <div className=\"container\">\n               <Loader show={this.state.loaded} message={<div class=\"spinner-border\" role=\"status\">\n  <span class=\"sr-only\">Loading...</span>\n</div>}>\n\n                {Error}\n            \n\n\n                <div className=\"d-flex justify-content-center h-100\">\n                    <Menu></Menu>\n                    <div style={{ maxWidth: \"800px\" }} className=\"card float-left\">\n\n                        <div className=\"card-header\">\n                            <h3>{window.RECIEPT_MESSAGE}</h3>\n                        </div>\n                        <div className=\"col-sm-12 col-sm-offset-4 card-body\">\n                            <form onSubmit={this.get_pdf} id=\"login_form\">\n                                <label style={{ color: \"white\" }} className=\"float-left\" for=\"fname\"><b>Enter First Name</b></label>\n\n                                <div className=\"input-group form-group\">\n\n                                    <input onChange={this.handleChange} type=\"text\" value={this.state.fname} className=\"form-control input-sm\" id=\"fname\" name=\"fname\" placeholder=\"First Name\" required />\n                                </div>\n                                <label style={{ color: \"white\" }} className=\"float-left\" for=\"lname\"><b>Enter Last Name</b></label>\n\n                                <div className=\"input-group form-group\">\n\n                                    <input onChange={this.handleChange} type=\"text\" className=\"form-control\" value={this.state.lname} id=\"lname\" name=\"lname\" placeholder=\"Last Name\" required />\n                                </div>\n                                <label style={{ color: \"white\" }} className=\"float-left\" for=\"mobile\"><b>Enter Mobile No:</b></label>\n\n                                <div className=\"input-group form-group\">\n\n                                    <input onChange={this.handleChange} type=\"tel\" value={this.state.mobile} className=\"form-control\" id=\"mobile\" placeholder=\"Mobile Number\" name=\"mobile\" pattern=\"[0-9]{10}\" required />\n                                </div>\n\n                                <label style={{ color: \"white\" }} className=\"float-left\" for=\"payment\"><b>Enter Payment Mode</b></label>\n\n                                <div className=\"input-group form-group\">\n\n                                    <select onChange={this.handleChange} value={this.state.payment_method} id=\"payment\" name=\"payment_method\" className=\"form-control\">\n                                        <option> None</option>\n\n                                        {payments}\n                                    </select>\n                                </div>\n                                <label style={{ color: \"white\" }} className=\"float-left\" for=\"dob\"><b>Enter Date of Birth</b></label>\n\n                                <div className=\"input-group form-group\">\n\n                                    <DatePicker maxDate={new Date()} placeholderText=\"Enter DOB\" dateFormat=\"dd/MM/yyyy\" selected={this.state.birth_day} onChange={this.onChange} />\n                                </div>\n                                <div id=\"items-cart\">\n                                    {items}\n                                    <div>\n                                    </div>\n                                </div>\n\n                                <div className=\"input-group form-group float-right price-tag\">\n                                    <div className=\"input-group-prepend\">\n                                        <span className=\"input-group-text\"><i className=\"fa fa-rupee\"></i></span>\n                                    </div>\n                                    <input type=\"text\" className=\"form-control\" value={this.state.amount_payable} readOnly id=\"amount\" />\n                                </div>\n\n                                <div className=\"input-group form-group float-right price-tag\">\n                                    <div className=\"input-group-prepend\">\n                                        <span className=\"input-group-text\"><i className=\"fa fa-percent\"></i></span>\n                                    </div>\n                                    <input type=\"number\" onChange={this.handleChange} name=\"discount_given\" value={this.state.discount_given} className=\"form-control\" min=\"0\" max=\"100\" />\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <input type=\"submit\" value=\"Submit\" className=\"btn-lg login_btn\" />\n                                </div>\n\n                            </form>\n                            <datalist id=\"sizes\">\n                                {sizes}\n                            </datalist>\n                        </div>\n                    </div>\n                </div>\n\n\n\n                </Loader>\n\n\n\n            </div>\n        )\n    }\n}\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}