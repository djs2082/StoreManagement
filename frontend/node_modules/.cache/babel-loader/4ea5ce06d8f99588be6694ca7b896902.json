{"ast":null,"code":"import _defineProperty from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dilip/Desktop/MERN/himalayadonelocal2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import md5 from'md5-hash';import'../css/login.css';import axios from'axios';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.errorOccured=function(status,err,message){var error={\"id\":_this.state.errors.length+1,\"status\":status,\"error\":err,\"message\":message};var errors=_this.state.errors;errors.push(error);_this.setState(errors);};_this.deleteError=function(e){var key=e.currentTarget.parentNode.getAttribute(\"data-key\");var errors=_this.state.errors.filter(function(error){return parseInt(error.id)!==parseInt(key);});_this.setState({errors:errors});};_this.handleSubmit=function(e){e.preventDefault();axios.post(\"https://shield.pythonanywhere.com/owner/login_user/\",{'username':_this.state.username,'password':_this.state.password}).then(function(response){console.log(response);if(response.status==200){if(response.data.status==404){_this.errorOccured(404,response.data.error.error,\"Invalid Username or Password\");}else if(response.data.status==200){_this.setState({isLoggedIn:true,error:false});sessionStorage.setItem('username',_this.state.username);sessionStorage.setItem('token',response.data.Data.token);_this.props.history.push('/home');}else{_this.errorOccured(response.data.status,response.error.error,\"Unknown Error Occurred\");}}else{_this.errorOccured(500,\"erro occurred\",\"Unknown error occurred\");}}).catch(function(error){_this.errorOccured(500,\"error occurred\",error.message);});};_this.state={username:null,password:null,isLoggedIn:false,errors:[]};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;var Error=this.state.errors.length?this.state.errors.map(function(error){return/*#__PURE__*/React.createElement(\"div\",{\"data-key\":error.id,className:\"alert alert-danger alert-dismissible\"},/*#__PURE__*/React.createElement(\"a\",{href:\"#\",onClick:_this2.deleteError,class:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"close\"},\"\\xD7\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"error!\"),\" \",error.error),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"message\"),\" \",error.message),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"status\"),\" \",error.status));}):\"\";return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},Error,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center h-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Sign In\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,id:\"login_form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-user\"}))),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,type:\"text\",className:\"form-control\",id:\"username\",name:\"username\",placeholder:\"username\",required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-key\"}))),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",placeholder:\"password\",required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Login\",className:\"btn-lg float-right login_btn\"})))))));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/home/dilip/Desktop/MERN/himalayadonelocal2/src/components/login.component.js"],"names":["React","Component","md5","axios","Login","props","handleChange","e","setState","target","name","value","errorOccured","status","err","message","error","state","errors","length","push","deleteError","key","currentTarget","parentNode","getAttribute","filter","parseInt","id","handleSubmit","preventDefault","post","username","password","then","response","console","log","data","isLoggedIn","sessionStorage","setItem","Data","token","history","catch","Error","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport md5 from 'md5-hash';\nimport '../css/login.css';\nimport axios from 'axios';\n\nclass Login extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tusername: null,\n\t\t\tpassword: null,\n\t\t\tisLoggedIn: false,\n\t\t\terrors: [],\n\t\t}\n\t}\n\n\thandleChange = (e) => {\n\t\tthis.setState({\n\t\t\t[e.target.name]: e.target.value\n\t\t})\n\t}\n\n\terrorOccured = (status, err, message) => {\n\t\tlet error = { \"id\": this.state.errors.length + 1, \"status\": status, \"error\": err, \"message\": message }\n\t\tlet errors = this.state.errors\n\t\terrors.push(error)\n\n\t\tthis.setState(errors)\n\t}\n\n\tdeleteError = (e) => {\n\t\tlet key = e.currentTarget.parentNode.getAttribute(\"data-key\");\n\n\t\tlet errors = this.state.errors.filter(error => {\n\t\t\treturn parseInt(error.id) !== parseInt(key);\n\t\t})\n\t\tthis.setState({ errors: errors })\n\t}\n\n\n\n\n\thandleSubmit = (e) => {\n\t\te.preventDefault();\n\t\taxios.post(\"https://shield.pythonanywhere.com/owner/login_user/\", { 'username': this.state.username, 'password': this.state.password })\n\t\t\t.then(response => {\n\t\t\t\tconsole.log(response)\n\t\t\t\tif (response.status == 200) {\n\n\n\t\t\t\t\tif (response.data.status == 404) {\n\n\n\t\t\t\t\t\tthis.errorOccured(404, response.data.error.error, \"Invalid Username or Password\")\n\t\t\t\t\t}\n\t\t\t\t\telse if (response.data.status == 200) {\n\n\n\t\t\t\t\t\tthis.setState({ isLoggedIn: true, error: false })\n\t\t\t\t\t\tsessionStorage.setItem('username', this.state.username);\n\t\t\t\t\t\tsessionStorage.setItem('token', response.data.Data.token);\n\t\t\t\t\t\tthis.props.history.push('/home');\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\n\t\t\t\t\t\tthis.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\")\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\tthis.errorOccured(500, \"erro occurred\", \"Unknown error occurred\")\n\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\n\t\t\t\tthis.errorOccured(500, \"error occurred\", error.message)\n\t\t\t});\n\n\t}\n\n\trender() {\n\t\tvar Error = this.state.errors.length ? this.state.errors.map(error => {\n\t\t\treturn (<div data-key={error.id} className='alert alert-danger alert-dismissible'>\n\t\t\t\t<a href=\"#\" onClick={this.deleteError} class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>\n\t\t\t\t<div><strong>error!</strong> {error.error}</div>\n\t\t\t\t<div><strong>message</strong> {error.message}</div>\n\t\t\t\t<div><strong>status</strong> {error.status}</div></div>)\n\t\t}) : (\"\")\n\n\n\n\t\treturn (\n\t\t\t<div className=\"container\">\n\t\t\t\t{Error}\n\n\t\t\t\t<div className=\"d-flex justify-content-center h-100\">\n\t\t\t\t\t<div className=\"card\">\n\t\t\t\t\t\t<div className=\"card-header\">\n\t\t\t\t\t\t\t<h3>Sign In</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t\t\t<form onSubmit={this.handleSubmit} id=\"login_form\">\n\t\t\t\t\t\t\t\t<div className=\"input-group form-group\">\n\t\t\t\t\t\t\t\t\t<div className=\"input-group-prepend\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"input-group-text\"><i className=\"fas fa-user\"></i></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<input onChange={this.handleChange} type=\"text\" className=\"form-control\" id=\"username\" name=\"username\" placeholder=\"username\" required></input>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"input-group form-group\">\n\t\t\t\t\t\t\t\t\t<div className=\"input-group-prepend\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"input-group-text\"><i className=\"fas fa-key\"></i></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<input onChange={this.handleChange} type=\"password\" className=\"form-control\" id=\"password\" name=\"password\" placeholder=\"password\" required></input>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input type=\"submit\" value=\"Login\" className=\"btn-lg float-right login_btn\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}