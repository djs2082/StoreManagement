{"ast":null,"code":"var _jsxFileName = \"/home/dilip/Desktop/MERN/himalayadonelocal2/src/components/statistics.component.js\";\nimport React, { Component } from 'react';\nimport Chart from \"react-google-charts\";\nimport Menu from './menu.component';\nimport axios from 'axios';\n\nclass Graph extends Component {\n  constructor(props) {\n    super(props);\n\n    this.errorOccured = (status, err, message) => {\n      let error = {\n        \"id\": this.state.errors.length + 1,\n        \"status\": status,\n        \"error\": err,\n        \"message\": message\n      };\n      let errors = this.state.errors;\n      errors.push(error);\n      console.log(errors);\n      this.setState(errors);\n    };\n\n    this.deleteError = e => {\n      let key = e.currentTarget.parentNode.getAttribute(\"data-key\");\n      console.log(key);\n      let errors = this.state.errors.filter(error => {\n        return parseInt(error.id) !== parseInt(key);\n      });\n      this.setState({\n        errors: errors\n      });\n    };\n\n    this.componentDidMount = () => {\n      var headers = {\n        'Authorization': 'Token ' + sessionStorage.getItem('token')\n      };\n      axios.get('https://shield.pythonanywhere.com/receipts/sales_for_graph/', {\n        headers: headers\n      }).then(response => {\n        console.log(response);\n\n        if (response.status == 200) {\n          if (response.data.status == 404) {\n            this.errorOccured(404, response.data.error.error, \"Error\");\n          } else if (response.data.status == 200) {\n            var data = [];\n\n            if (response.data.status != 404) {\n              data.push(this.state.data);\n              console.log(data);\n              response.data.Data.date_wise_payment_list.map(sell => {\n                let temp = [];\n                temp.push(sell.date);\n                temp.push(sell.amount);\n                data.push(temp);\n                console.log(temp);\n                console.log(data);\n              });\n            }\n\n            this.setState({\n              graph_data: data\n            });\n          } else {\n            console.log('occ');\n            this.errorOccured(response.data.status, response.error.error, \"Unknown Error Occurred\");\n          }\n        } else {\n          console.log('occ');\n          this.errorOccured(500, \"erro occurred\", \"Unknown error occurred\");\n        }\n      }).catch(error => {\n        console.log('occ');\n        this.errorOccured(500, \"error occurred\", error.message);\n      });\n    };\n\n    if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n      this.props.history.push('/');\n    }\n\n    this.state = {\n      data: ['Sale', ''],\n      errors: []\n    };\n  }\n\n  render() {\n    var Error = this.state.errors.length ? this.state.errors.map(error => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-key\": error.id,\n        className: \"alert alert-danger alert-dismissible override\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 75\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.deleteError,\n        class: \"close\",\n        \"data-dismiss\": \"alert\",\n        \"aria-label\": \"close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 3\n        }\n      }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 8\n        }\n      }, \"error!\"), \" \", error.error), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 8\n        }\n      }, \"message\"), \" \", error.message), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 8\n        }\n      }, \"status\"), \" \", error.status));\n    }) : \"\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, Error, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        maxWidth: 900\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(Chart, {\n      width: 1400,\n      height: 1300,\n      chartType: \"ColumnChart\",\n      loader: /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      }, \"Loading Chart\"),\n      data: this.state.graph_data,\n      options: {\n        title: 'Sales of This Month',\n        chartArea: {\n          maxWidth: '75%',\n          maHeight: '75%',\n          backgroundColor: \"black\"\n        },\n        hAxis: {\n          title: 'Date'\n        },\n        vAxis: {\n          title: 'Sale'\n        }\n      },\n      legendToggle: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 3\n      }\n    })));\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["/home/dilip/Desktop/MERN/himalayadonelocal2/src/components/statistics.component.js"],"names":["React","Component","Chart","Menu","axios","Graph","constructor","props","errorOccured","status","err","message","error","state","errors","length","push","console","log","setState","deleteError","e","key","currentTarget","parentNode","getAttribute","filter","parseInt","id","componentDidMount","headers","sessionStorage","getItem","get","then","response","data","Data","date_wise_payment_list","map","sell","temp","date","amount","graph_data","catch","history","render","Error","display","maxWidth","title","chartArea","maHeight","backgroundColor","hAxis","vAxis"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,KAAN,SAAoBJ,SAApB,CACA;AACIK,EAAAA,WAAW,CAACC,KAAD,EACX;AACF,UAAMA,KAAN;;AADE,SAWHC,YAXG,GAWU,CAACC,MAAD,EAAQC,GAAR,EAAYC,OAAZ,KAAsB;AAClC,UAAIC,KAAK,GAAC;AAAC,cAAK,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,MAAlB,GAAyB,CAA/B;AAAiC,kBAASN,MAA1C;AAAiD,iBAAQC,GAAzD;AAA6D,mBAAUC;AAAvE,OAAV;AACA,UAAIG,MAAM,GAAC,KAAKD,KAAL,CAAWC,MAAtB;AACAA,MAAAA,MAAM,CAACE,IAAP,CAAYJ,KAAZ;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAZ;AACA,WAAKK,QAAL,CAAcL,MAAd;AACA,KAjBE;;AAAA,SAmBHM,WAnBG,GAmBUC,CAAD,IAAK;AACf,UAAIC,GAAG,GAAED,CAAC,CAACE,aAAF,CAAgBC,UAAhB,CAA2BC,YAA3B,CAAwC,UAAxC,CAAT;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACA,UAAIR,MAAM,GAAG,KAAKD,KAAL,CAAWC,MAAX,CAAkBY,MAAlB,CAAyBd,KAAK,IAAI;AAC9C,eAAOe,QAAQ,CAACf,KAAK,CAACgB,EAAP,CAAR,KAAuBD,QAAQ,CAACL,GAAD,CAAtC;AACA,OAFY,CAAb;AAGA,WAAKH,QAAL,CAAc;AAACL,QAAAA,MAAM,EAAEA;AAAT,OAAd;AACD,KA1BE;;AAAA,SA2BHe,iBA3BG,GA2Be,MAAI;AACrB,UAAIC,OAAO,GAAG;AACb,yBAAiB,WAASC,cAAc,CAACC,OAAf,CAAuB,OAAvB;AADb,OAAd;AAGE5B,MAAAA,KAAK,CAAC6B,GAAN,CAAU,6DAAV,EAAwE;AACzEH,QAAAA,OAAO,EAAEA;AADgE,OAAxE,EAGCI,IAHD,CAGMC,QAAQ,IAAI;AACnBlB,QAAAA,OAAO,CAACC,GAAR,CAAYiB,QAAZ;;AACA,YAAGA,QAAQ,CAAC1B,MAAT,IAAmB,GAAtB,EACA;AAEC,cAAG0B,QAAQ,CAACC,IAAT,CAAc3B,MAAd,IAAwB,GAA3B,EACA;AACC,iBAAKD,YAAL,CAAkB,GAAlB,EAAsB2B,QAAQ,CAACC,IAAT,CAAcxB,KAAd,CAAoBA,KAA1C,EAAgD,OAAhD;AACA,WAHD,MAKK,IAAGuB,QAAQ,CAACC,IAAT,CAAc3B,MAAd,IAAwB,GAA3B,EACL;AACC,gBAAI2B,IAAI,GAAC,EAAT;;AACA,gBAAGD,QAAQ,CAACC,IAAT,CAAc3B,MAAd,IAAwB,GAA3B,EACA;AACA2B,cAAAA,IAAI,CAACpB,IAAL,CAAU,KAAKH,KAAL,CAAWuB,IAArB;AACAnB,cAAAA,OAAO,CAACC,GAAR,CAAYkB,IAAZ;AACAD,cAAAA,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBC,sBAAnB,CAA0CC,GAA1C,CAA8CC,IAAI,IAAE;AACnD,oBAAIC,IAAI,GAAC,EAAT;AACAA,gBAAAA,IAAI,CAACzB,IAAL,CAAUwB,IAAI,CAACE,IAAf;AACAD,gBAAAA,IAAI,CAACzB,IAAL,CAAUwB,IAAI,CAACG,MAAf;AACAP,gBAAAA,IAAI,CAACpB,IAAL,CAAUyB,IAAV;AACAxB,gBAAAA,OAAO,CAACC,GAAR,CAAYuB,IAAZ;AACAxB,gBAAAA,OAAO,CAACC,GAAR,CAAYkB,IAAZ;AACA,eAPD;AAQE;;AACD,iBAAKjB,QAAL,CAAc;AAACyB,cAAAA,UAAU,EAACR;AAAZ,aAAd;AAED,WAlBI,MAoBL;AACCnB,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,iBAAKV,YAAL,CAAkB2B,QAAQ,CAACC,IAAT,CAAc3B,MAAhC,EAAuC0B,QAAQ,CAACvB,KAAT,CAAeA,KAAtD,EAA4D,wBAA5D;AACA;AACD,SAhCD,MAkCA;AACCK,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,eAAKV,YAAL,CAAkB,GAAlB,EAAsB,eAAtB,EAAsC,wBAAtC;AAEA;AACA,OA5CA,EA6CDqC,KA7CC,CA6CKjC,KAAK,IAAI;AACfK,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,aAAKV,YAAL,CAAkB,GAAlB,EAAsB,gBAAtB,EAAuCI,KAAK,CAACD,OAA7C;AACA,OAhDC;AAkDF,KAjFE;;AAGI,QAAIoB,cAAc,CAACC,OAAf,CAAuB,OAAvB,MAAoC,WAApC,IAAmDD,cAAc,CAACC,OAAf,CAAuB,UAAvB,MAAuC,WAA9F,EAA2G;AACvG,WAAKzB,KAAL,CAAWuC,OAAX,CAAmB9B,IAAnB,CAAwB,GAAxB;AACH;;AACP,SAAKH,KAAL,GAAW;AACVuB,MAAAA,IAAI,EAAC,CAAC,MAAD,EAAS,EAAT,CADK;AAEVtB,MAAAA,MAAM,EAAC;AAFG,KAAX;AAIA;;AAwEEiC,EAAAA,MAAM,GACN;AACF,QAAIC,KAAK,GAAC,KAAKnC,KAAL,CAAWC,MAAX,CAAkBC,MAAlB,GAAyB,KAAKF,KAAL,CAAWC,MAAX,CAAkByB,GAAlB,CAAsB3B,KAAK,IAAE;AAAC,0BAAO;AAAK,oBAAUA,KAAK,CAACgB,EAArB;AAAyB,QAAA,SAAS,EAAC,+CAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACxE;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,OAAO,EAAE,KAAKR,WAA1B;AAAuC,QAAA,KAAK,EAAC,OAA7C;AAAqD,wBAAa,OAAlE;AAA0E,sBAAW,OAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADwE,eAExE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAL,OAA8BR,KAAK,CAACA,KAApC,CAFwE,eAGxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAL,OAA+BA,KAAK,CAACD,OAArC,CAHwE,eAIxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAL,OAA8BC,KAAK,CAACH,MAApC,CAJwE,CAAP;AAIR,KAJtB,CAAzB,GAIkD,EAJ5D;AAKM,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACPuC,KADO,eAEP,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFO,eAGZ;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE,MAAX;AAAkBC,QAAAA,QAAQ,EAAE;AAA5B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AACE,MAAA,KAAK,EAAE,IADT;AAEE,MAAA,MAAM,EAAE,IAFV;AAGE,MAAA,SAAS,EAAC,aAHZ;AAIE,MAAA,MAAM,eAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAJV;AAKE,MAAA,IAAI,EAAE,KAAKrC,KAAL,CAAW+B,UALnB;AAME,MAAA,OAAO,EAAE;AACPO,QAAAA,KAAK,EAAE,qBADA;AAEPC,QAAAA,SAAS,EAAE;AAAEF,UAAAA,QAAQ,EAAE,KAAZ;AAAkBG,UAAAA,QAAQ,EAAC,KAA3B;AAAiCC,UAAAA,eAAe,EAAC;AAAjD,SAFJ;AAGPC,QAAAA,KAAK,EAAE;AACLJ,UAAAA,KAAK,EAAE;AADF,SAHA;AAMPK,QAAAA,KAAK,EAAE;AACLL,UAAAA,KAAK,EAAE;AADF;AANA,OANX;AAgBE,MAAA,YAAY,MAhBd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAHY,CADJ;AAwBM;;AAnHd;;AAqHA,eAAe9C,KAAf","sourcesContent":["import React,{Component} from 'react'\nimport Chart from \"react-google-charts\";\nimport Menu from './menu.component';\nimport axios from 'axios';\n\nclass Graph extends Component\n{\n    constructor(props)\n    {\n\t\tsuper(props)\n\n        if (sessionStorage.getItem('token') === 'undefined' || sessionStorage.getItem('username') === 'undefined') {\n            this.props.history.push('/')\n        }\n\t\tthis.state={\n\t\t\tdata:['Sale', ''],\n\t\t\terrors:[]\n\t\t}\n\t}\n\terrorOccured=(status,err,message)=>{\n\t\tlet error={\"id\":this.state.errors.length+1,\"status\":status,\"error\":err,\"message\":message}\n\t\tlet errors=this.state.errors\n\t\terrors.push(error)\n\t\tconsole.log(errors)\n\t\tthis.setState(errors)\n\t}\n\t\n\tdeleteError=(e)=>{\n\t\t\tlet key= e.currentTarget.parentNode.getAttribute(\"data-key\");\n\t\t\tconsole.log(key)\n\t\t\tlet errors = this.state.errors.filter(error => {\n\t\t\t\treturn parseInt(error.id) !== parseInt(key);\n\t\t\t})\n\t\t\tthis.setState({errors: errors})\n\t}\n\tcomponentDidMount=()=>{\n\t\tvar headers = {\n\t\t\t'Authorization': 'Token '+sessionStorage.getItem('token')\n\t\t  }\n\t\t  axios.get('https://shield.pythonanywhere.com/receipts/sales_for_graph/',{\n\t\t\theaders: headers\n\t\t  })\n\t\t  .then(response => {\n\t\t\tconsole.log(response)\n\t\t\tif(response.status == 200)\n\t\t\t{\n\t\n\t\t\t\tif(response.data.status == 404)\n\t\t\t\t{\n\t\t\t\t\tthis.errorOccured(404,response.data.error.error,\"Error\")\n\t\t\t\t}\n\t\t\t\n\t\t\t\telse if(response.data.status == 200)\n\t\t\t\t{\n\t\t\t\t\tvar data=[]\n\t\t\t\t\tif(response.data.status != 404)\n\t\t\t\t\t{\n\t\t\t\t\tdata.push(this.state.data)\n\t\t\t\t\tconsole.log(data)\n\t\t\t\t\tresponse.data.Data.date_wise_payment_list.map(sell=>{\n\t\t\t\t\t\tlet temp=[]\n\t\t\t\t\t\ttemp.push(sell.date)\n\t\t\t\t\t\ttemp.push(sell.amount)\n\t\t\t\t\t\tdata.push(temp)\n\t\t\t\t\t\tconsole.log(temp)\n\t\t\t\t\t\tconsole.log(data)\n\t\t\t\t\t})\n\t\t\t\t  }\n\t\t\t\t  this.setState({graph_data:data})\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.log('occ')\n\t\t\t\t\tthis.errorOccured(response.data.status,response.error.error,\"Unknown Error Occurred\")\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.log('occ')\n\t\t\t\tthis.errorOccured(500,\"erro occurred\",\"Unknown error occurred\")\n\t\n\t\t\t}\n\t\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.log('occ')\n\t\t\tthis.errorOccured(500,\"error occurred\",error.message)\n\t\t});\n\n\t}\n    render()\n    {\n\t\tvar Error=this.state.errors.length?this.state.errors.map(error=>{return(<div data-key={error.id} className='alert alert-danger alert-dismissible override'>\n\t\t<a href=\"#\" onClick={this.deleteError} class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>\n\t\t<div><strong>error!</strong> {error.error}</div>\n\t\t<div><strong>message</strong> {error.message}</div>\n\t\t<div><strong>status</strong> {error.status}</div></div>)}):(\"\")  \n        return(\n            <div>\n\t\t\t\t{Error}\n\t\t\t\t <Menu></Menu>\n<div style={{ display: 'flex',maxWidth: 900 }}>\n  <Chart\n    width={1400}\n    height={1300}\n    chartType=\"ColumnChart\"\n    loader={<div>Loading Chart</div>}\n    data={this.state.graph_data}\n    options={{\n      title: 'Sales of This Month',\n      chartArea: { maxWidth: '75%',maHeight:'75%',backgroundColor:\"black\" },\n      hAxis: {\n        title: 'Date',\n      },\n      vAxis: {\n        title: 'Sale',\n      },\n    }}\n    legendToggle\n  />\n \n</div></div>)}\n}\nexport default Graph;"]},"metadata":{},"sourceType":"module"}